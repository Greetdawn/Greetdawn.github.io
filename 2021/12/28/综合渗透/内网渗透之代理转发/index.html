<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  
  <title>内网渗透之代理转发 | greetdawn&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="在日常渗透测试过程中，当我们getshell一台边界主机后，经常需要借助边界主机实现对内网主机流量的转发和代理操作。这里可以使用一些代理脚本和转发工具将内网的流量代理和转发到本地进行访问，以方便我们后续内网渗透。这边着重介绍一下在内网渗透中常用的几种转发协议的特点和代理工具的使用。">
<meta property="og:type" content="article">
<meta property="og:title" content="内网渗透之代理转发">
<meta property="og:url" content="http://www.greetdawn.top/2021/12/28/%E7%BB%BC%E5%90%88%E6%B8%97%E9%80%8F/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F%E4%B9%8B%E4%BB%A3%E7%90%86%E8%BD%AC%E5%8F%91/index.html">
<meta property="og:site_name" content="greetdawn&#39;s Blog">
<meta property="og:description" content="在日常渗透测试过程中，当我们getshell一台边界主机后，经常需要借助边界主机实现对内网主机流量的转发和代理操作。这里可以使用一些代理脚本和转发工具将内网的流量代理和转发到本地进行访问，以方便我们后续内网渗透。这边着重介绍一下在内网渗透中常用的几种转发协议的特点和代理工具的使用。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20211228145340108.png">
<meta property="og:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20211228160014598.png">
<meta property="article:published_time" content="2021-12-28T06:16:20.000Z">
<meta property="article:modified_time" content="2021-12-28T09:27:17.760Z">
<meta property="article:author" content="丨greetdawn丨">
<meta property="article:tag" content="代理转发">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20211228145340108.png">
  
    <link rel="alternate" href="/atom.xml" title="greetdawn's Blog" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.ico">
  
  
<link rel="stylesheet" href="/css/typing.css">

  
<link rel="stylesheet" href="/css/donate.css">

  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.4.0"></head>

  
    
      <body>
    
  
      <div id="container" class="container">
        <article id="post-综合渗透/内网渗透之代理转发" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <header id="header" class="header">
  <nav class="mobile-nav">
    <h1 class="nickname">NickName</h1>
    <ul class="mobile-nav-menu">
      <label for="mobile-menu-toggle"><a id="menu-button">&#9776; Menu</a></label>
      <input type="checkbox" id="mobile-menu-toggle"/>
      <ul class="mobile-nav-link">
        
        <a href="/">Home</a>
        
        <a href="/archives">Archives</a>
        
        <a href="/about">About</a>
        
      </ul>
    </ul>
  </nav>
	
		<nav id="main-nav" class="main-nav nav-left">
	
	
	  <a class="main-nav-link" href="/">Home</a>
	
	  <a class="main-nav-link" href="/archives">Archives</a>
	
	  <a class="main-nav-link" href="/about">About</a>
	
  </nav>
</header>

  <hr/>
  <div class="article-inner">
    

    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      内网渗透之代理转发
    </h1>
  

      </header>
    
    <div class="e-content article-entry typo" itemprop="articleBody">
      
        <blockquote>
<p>在日常渗透测试过程中，当我们<code>getshell</code>一台边界主机后，经常需要借助边界主机实现对内网主机流量的转发和代理操作。这里可以使用一些代理脚本和转发工具将内网的流量代理和转发到本地进行访问，以方便我们后续内网渗透。这边着重介绍一下在内网渗透中常用的几种转发协议的特点和代理工具的使用。</p>
</blockquote>
<span id="more"></span>



<h2 id="代理的分类"><a href="#代理的分类" class="headerlink" title="代理的分类"></a>代理的分类</h2><h3 id="正向代理"><a href="#正向代理" class="headerlink" title="正向代理"></a>正向代理</h3><p>代理服务器位于客户端和服务端之间的一台服务器，且<code>proxy</code>和<code>client</code>同属于一个区域，对<code>server</code>是透明的；其作用是从目标服务器取得内容，客户端向代理服务器发送一个请求并指定目标，然后代理服务器向目标服务器转交请求并将获得的内容返回给客户端。（类似于现实生活中的中介）</p>
<p><img src="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20211228145340108.png" alt="image-20211228145340108"></p>
<p><strong>运行流程：</strong>客户端——请求——&gt; 代理服服务器——请求——&gt; 服务端</p>
<p><strong>代理特点：</strong></p>
<ul>
<li>客户端无法直接访问到服务端的目标应用，但是代理服务器可以。（典型场景：<code>FANQIANG</code>）</li>
<li>代理服务器帮助客户端请求页面并缓存在本地，并将页面返回到客户端</li>
<li>客户端需要设置代理服务器地址和端口（插件化），客户端知道代理服务器的存在</li>
<li>本质上代理服务器代理了客户端去和服务端请求交互的任务</li>
</ul>
<h3 id="反向代理"><a href="#反向代理" class="headerlink" title="反向代理"></a>反向代理</h3><p>以代理服务器来接收网络连接请求，然后将请求转发给内部网络上的服务器，并将服务器上得到的结果返回给网络上请求连接的客户端。代理服务器和服务端共处于一个区域中，对客户端是透明的。</p>
<p><img src="https://gitee.com/greetdawn/blogImages/raw/master/img/image-20211228160014598.png" alt="image-20211228160014598"></p>
<p><strong>代理特点：</strong></p>
<ul>
<li>客户端不清楚服务端是否存在代理服务器，以为请求的代理服务器就是真正的服务端</li>
<li>代理服务器将服务端页面缓存到本地，当客户端请求时直接返回给客户端</li>
<li>客户端无需任何配置，且不知道真实服务端的存在</li>
<li>应用场景：隐藏服务端真实<code>IP</code>、负载均衡、提高访问速度、增强安全性</li>
</ul>
<h2 id="代理工具"><a href="#代理工具" class="headerlink" title="代理工具"></a>代理工具</h2><h3 id="lcx"><a href="#lcx" class="headerlink" title="lcx"></a><code>lcx</code></h3>
      
      
    </div>
    <footer class="article-footer">
      <ul class="article-meta">
        <li>
          <span class="label">Published Date:</span>
          <a href="/2021/12/28/%E7%BB%BC%E5%90%88%E6%B8%97%E9%80%8F/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F%E4%B9%8B%E4%BB%A3%E7%90%86%E8%BD%AC%E5%8F%91/" class="article-date">
  <time class="dt-published" datetime="2021-12-28T06:16:20.000Z" itemprop="datePublished">2021-12-28</time>
</a>

        </li>
        
          <li>
            <span class="label">Category:</span>
            
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/">内网渗透</a>
  </div>


          </li>
        
        
          <li>
            <span class="label">Tag:</span>
            
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%BB%A3%E7%90%86%E8%BD%AC%E5%8F%91/" rel="tag">代理转发</a></li></ul>


          </li>
        
        <hr/>
      </ul>
    </footer>
  </div>
  
    
<nav id="article-nav" class="article-nav">
  
    <a href="/2021/12/29/%E6%BC%8F%E6%B4%9E%E7%A0%94%E7%A9%B6/Log4j2%E5%9F%BA%E4%BA%8EJDBCAPPENDER%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%BB%BB%E6%84%8F%E6%96%87%E4%BB%B6%E6%89%A7%E8%A1%8C-CVE-2021-44832/" id="article-nav-newer" class="article-nav-link-wrap newer">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Log4j2基于JDBCAPPENDER配置文件任意文件执行(CVE-2021-44832)
        
      </div>
    </a>
  
  
    <a href="/2021/12/27/config/%E5%85%B3%E4%BA%8EVMware%E7%A3%81%E7%9B%98%E9%95%9C%E5%83%8F%E5%AF%BC%E5%85%A5ESXi%E7%9A%84%E6%96%B9%E6%B3%95/" id="article-nav-older" class="article-nav-link-wrap older">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">关于VMware磁盘镜像导入ESXi的方法</div>
    </a>
  
</nav>


  
</article>










      </div>
      
    <footer id="footer" class="post-footer footer">
      
      <hr/>
      <div id="footerContent" class="footer-content">
        <p>ipsum dolor sit amet, <strong>consectetur adipiscing elit.</strong> Fusce eget urna vitae velit <em>eleifend interdum at ac nisi. In nec ligula lacus. Cum sociis natoque</em> penatibus et magnis dis parturient montes, nascetur ridiculus mus. Sed eu cursus erat, ut dapibus quam. Post</p>


      </div>
    </footer>

      








<script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>


<script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>



  
<script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>




<script src="/js/typing.js"></script>

<!--[if lt IE 9]>
<script src="https://cdn.jsdelivr.net/npm/html5shiv@3/dist/html5shiv.min.js"></script>
<![endif]-->







    </div>
  </body>
</html>
